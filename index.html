<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="author" content="" />
    <meta name="description" content="GS3" />
    <meta name="keywords" content="Automation,GS3" />
    <title>GS3</title>
    <link rel="shortcut icon" href="gs3.png" />
    <!-- Css -->
    <link href="themes/a.min.css" rel="stylesheet" type="text/css" />
    <link href="themes/jquery.mobile.icons.min.css" rel="stylesheet" type="text/css" />
    <link href="css/jquery.mobile.structure-1.4.2.min.css" rel="stylesheet" type="text/css" />
    <link type="text/css" rel="stylesheet" href="css/style.css" />
    <link type="text/css" rel="stylesheet" href="colors/green/green.css" />
    <link type="text/css" rel="stylesheet" href="css/idangerous.swiper.css" />
    <link type="text/css" rel="stylesheet" href="css/swipebox.css" />
    <link href="css/jtsage-datebox.min.css" rel="stylesheet" type="text/css" />
    <link href="css/hkStyle.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
        .ui-loader-background
        {
            width: 100%;
            height: 100%;
            top: 0;
            padding: 0;
            margin: 0;
            background: rgba(0, 0, 0, 0.3);
            display: block;
            position: fixed;
            z-index: 100;
        }
        
        .ui-page
        {
            -webkit-backface-visibility: hidden;
        }
        .ui-listview > .ui-li-static.ui-last-child, .ui-listview > .ui-li-divider.ui-last-child, .ui-listview > li.ui-last-child > a.ui-btn
        {
            border-bottom-width: 0;
        }
        .ui-listview > .ui-li-static, .ui-listview > .ui-li-divider, .ui-listview > li > a.ui-btn
        {
            border-style: none;
            border-width: 1px 0 0;
        }
        .ui-btn .ui-corner-all .ui-btn-inherit .ui-btn-active .ui-checkbox-on
        {
            color: Green;
        }
        .ui-page-theme-a .ui-btn.ui-btn-active, html .ui-bar-a .ui-btn.ui-btn-active, html .ui-body-a .ui-btn.ui-btn-active, html body .ui-group-theme-a .ui-btn.ui-btn-active, html head + body .ui-btn.ui-btn-a.ui-btn-active, .ui-page-theme-a .ui-checkbox-on:after, html .ui-bar-a .ui-checkbox-on:after, html .ui-body-a .ui-checkbox-on:after, html body .ui-group-theme-a .ui-checkbox-on:after, .ui-btn.ui-checkbox-on.ui-btn-a:after, .ui-page-theme-a .ui-flipswitch-active, html .ui-bar-a .ui-flipswitch-active, html .ui-body-a .ui-flipswitch-active, html body .ui-group-theme-a .ui-flipswitch-active, html body .ui-flipswitch.ui-bar-a.ui-flipswitch-active, .ui-page-theme-a .ui-slider-track .ui-btn-active, html .ui-bar-a .ui-slider-track .ui-btn-active, html .ui-body-a .ui-slider-track .ui-btn-active, html body .ui-group-theme-a .ui-slider-track .ui-btn-active, html body div.ui-slider-track.ui-body-a .ui-btn-active
        {
            background-color: #8CC63F;
        }
        #index .ui-listview > .ui-li-static, .ui-listview > .ui-li-divider, .ui-listview > li > a.ui-btn
        {
            border-style: solid;
            border-width: 1px 0 0;
        }
        .noCorner .ui-corner-all
        {
            border-radius: 0 !important;
        }
        .ui-selectmenu .ui-header
        {
            border-width: 0;
            margin: 0;
            padding: 5px;
        }
        .ui-dialog .ui-header .ui-btn-icon-notext
        {
            display: none;
        }
    </style>
    <!-- IR-AC -->
    <style type="text/css">
        .btnCool
        {
            display: block;
            width: 77px;
            height: 44px;
            background: url(css/images/IRicons/ac/cool1.png) no-repeat top;
        }
        
        .btnCool:active
        {
            background: url(css/images/IRicons/ac/cool2.png) no-repeat bottom;
        }
        
        .btnPowerOn
        {
            display: block;
            width: 77px;
            height: 44px;
            background: url(css/images/IRicons/ac/on1.png) no-repeat top;
        }
        
        .btnPowerOn:active
        {
            background: url(css/images/IRicons/ac/on2.png) no-repeat bottom;
        }
        
        .btnPowerOff
        {
            display: block;
            width: 77px;
            height: 44px;
            background: url(css/images/IRicons/ac/off1.png) no-repeat top;
        }
        
        .btnPowerOff:active
        {
            background: url(css/images/IRicons/ac/off2.png) no-repeat bottom;
        }
        
        .btnDry
        {
            display: block;
            width: 77px;
            height: 44px;
            background: url(css/images/IRicons/ac/dry1.png) no-repeat top;
        }
        
        .btnDry:active
        {
            background: url(css/images/IRicons/ac/dry2.png) no-repeat bottom;
        }
        
        .btnSwingUp
        {
            display: block;
            width: 77px;
            height: 44px;
            background: url(css/images/IRicons/ac/swing-up1.png) no-repeat top;
        }
        
        .btnSwingUp:active
        {
            background: url(css/images/IRicons/ac/swing-up2.png) no-repeat bottom;
        }
        
        .btnFan
        {
            display: block;
            width: 77px;
            height: 44px;
            background: url(css/images/IRicons/ac/fan1.png) no-repeat top;
        }
        
        .btnFan:active
        {
            background: url(css/images/IRicons/ac/fan2.png) no-repeat bottom;
        }
        
        .btnSwingDown
        {
            display: block;
            width: 77px;
            height: 44px;
            background: url(css/images/IRicons/ac/swing-down1.png) no-repeat top;
        }
        
        .btnSwingDown:active
        {
            background: url(css/images/IRicons/ac/swing-down2.png) no-repeat bottom;
        }
        
        .btnIncreseTemp
        {
            display: block;
            width: 77px;
            height: 44px;
            background: url(css/images/IRicons/ac/temp-plus1.png) no-repeat top;
        }
        
        .btnIncreseTemp:active
        {
            background: url(css/images/IRicons/ac/temp-plus2.png) no-repeat bottom;
        }
        
        .btnDecreseTemp
        {
            display: block;
            width: 77px;
            height: 44px;
            background: url(css/images/IRicons/ac/temp-minus1.png) no-repeat top;
        }
        
        .btnDecreseTemp:active
        {
            background: url(css/images/IRicons/ac/temp-minus2.png) no-repeat bottom;
        }
    </style>
    <!-- End -->
    <style type="text/css">
        .mainPage_bg
        {
            background-image: url("colors/green/images/bg-green.jpg");
            background-position: center center;
            background-repeat: no-repeat;
        }
        .sliderbg_menu
        {
            background-image: none;
        }
    </style>
    <!--Css END -->
    <!-- <style type="text/css">
        .ui-datebox-container
        {
            width: 250px;
        }
    </style>-->
    <style type="text/css">
        label.error
        {
            color: red;
            font-size: 15px;
            font-weight: normal;
            line-height: 1.4;
            margin-top: 0.5em;
            width: 100%;
            float: none;
            text-align: center;
        }
    </style>
</head>
<body onload="onLoad()">
    <div data-role="page" id="grouptype" data-title="GS3" data-transition="none" class="mainPage_bg">
        <div data-role="content" style="padding: 0 0 0 0;">
            <div class="swiper-container swiper-parent" style="padding: 0px;">
                <div class="swiper-wrapper">
                    <!--Menu page-->
                    <div class="swiper-slide sliderbg_menu">
                        <div class="swiper-container swiper-nested">
                            <div class="swiper-wrapper">
                                <div class="swiper-slide">
                                    <div class="slide-inner">
                                        <div class="logo">
                                            <a class="ui-link" href="#">
                                                <img src="colors/green/images/HKgs3logo.png" alt="" title="" border="0" /></a>
                                            <a class="ui-link" href="#" onclick="Logout();">
                                                <img border="0" title="" alt="" src="css/images/icons/Logout.png" style="width: 48px;
                                                    height: 48px;" /></a>
                                        </div>
                                        <br />
                                        <!--<center>
                                            <label style="color: White; font-weight: bold" id="authError">
                                            </label>
                                        </center>-->
                                        <div class="menu">
                                            <ul>
                                                <li><a id="GT1" class="ui-link" onclick="if(IsAuthenticated){if(UUIDConfig.length > 0 && LTypeConfig.length > 0 && ITypeConfig.length > 0 && ISubTypeConfig.length > 0 ){menubtn_Click(this);}else{alert('Error while loading configuration. Please check network connection.');};}else{alert('User authentication failed. Please check username and password.');};"
                                                    name="Light" href="#">
                                                    <img src="css/images/icons/bulb.png" alt="light" />
                                                    <span class="spanGType">Lighting</span> </a></li>
                                                <li><a id="GT2" class="ui-link" onclick="if(IsAuthenticated){if(UUIDConfig.length > 0 && LTypeConfig.length > 0 && ITypeConfig.length > 0 && ISubTypeConfig.length > 0){menubtn_Click(this);}else{alert('Error while loading configuration. Please check network connection.');};}else{alert('User authentication failed. Please check username and password.');};"
                                                    name="Fan" href="#">
                                                    <img src="css/images/icons/fan.png" alt="dimmer" />
                                                    <span class="spanGType">Fan</span> </a></li>
                                                <li><a id="GT3" class="ui-link" onclick="if(IsAuthenticated){if(UUIDConfig.length > 0 && LTypeConfig.length > 0 && ITypeConfig.length > 0 && ISubTypeConfig.length > 0){menubtn_Click(this);}else{alert('Error while loading configuration. Please check network connection.');};}else{alert('User authentication failed. Please check username and password.');};"
                                                    name="Dimmer" href="#">
                                                    <img src="css/images/icons/dimmer.png" alt="dimmer" />
                                                    <span class="spanGType">Dimmers</span> </a></li>
                                                <!--<li><a id="GT4" class="ui-link" onclick="alert('Under Construction...');" name="AC"
                                                    href="#">
                                                    <img src="css/images/icons/Temp1.png" alt="Temp" />
                                                    <span class="spanGType">AC</span> </a></li>-->
                                                <li><a id="GT5" class="ui-link" onclick="if(IsAuthenticated){if(UUIDConfig.length > 0 && LTypeConfig.length > 0 && ITypeConfig.length > 0 && ISubTypeConfig.length > 0){menubtn_Click(this);}else{alert('Error while loading configuration. Please check network connection.');};}else{alert('User authentication failed. Please check username and password.');};"
                                                    name="Plug" href="#">
                                                    <img src="css/images/icons/plug1.png" alt="plug" />
                                                    <span class="spanGType">A Plug</span> </a></li>
                                                <!--<li><a id="GT6" class="ui-link" onclick="if(UUIDConfig.length > 0){menubtn_Click(this);}else{alert('please try again...');};"
                                                    name="Local Scene" href="#">
                                                    <img src="css/images/icons/local_scene.png" alt="LScenes" />
                                                    <span class="spanGType">Local Scenes</span> </a></li>-->
                                                <li><a id="GT7" class="ui-link" onclick="if(IsAuthenticated){if(IRConfig.length > 0 && LTypeConfig.length > 0 && ITypeConfig.length > 0 && ISubTypeConfig.length > 0){menubtn_Click(this);}else{alert('Error while loading configuration. Please check network connection.');};}else{alert('User authentication failed. Please check username and password.');};"
                                                    name="IR-AC" href="#">
                                                    <img src="css/images/icons/irac.png" alt="IRAC" />
                                                    <span class="spanGType">IR-AC</span> </a></li>
                                                <li><a id="btnGScene" class="ui-link" name="Global Scenes" href="#" onclick="if(IsAuthenticated){if(GSceneConfig.length > 0 && LTypeConfig.length > 0 && ITypeConfig.length > 0 && ISubTypeConfig.length > 0){menuGScene_Click(this);}else{alert('Error while loading configuration. Please check network connection.');};}else{alert('User authentication failed. Please check username and password.');};">
                                                    <img src="css/images/icons/global_scene.png" alt="GScene" />
                                                    <span class="spanGType">Global Scenes</span> </a></li>
                                                <!--<li><a id="GT4" class="ui-link" onclick="GroupType_Click(this);" name="15 A Plug"
                                                    href="#">
                                                    <img src="css/images/icons/plug2.png" />
                                                    <span class="spanGType">15 A Plug</span> </a></li>-->
                                                <!--<li><a id="GT6" class="ui-link" onclick="menu_Click(this);" name="Temp Control" href="#">
                                                    <img src="css/images/icons/Temp1.png" alt="Temp" />
                                                    <span class="spanGType">Temp Control</span> </a></li>-->
                                                <!--<li><a id="GT7" class="ui-link" onclick="menu_Click(this);" name="Local Scenes" href="#">
                                                    <img src="css/images/icons/local_scene.png" alt="LScenes" />
                                                    <span class="spanGType">Local Scenes</span> </a></li>
                                                <li><a id="GT9" class="ui-link" onclick="GroupType_Click(this);" name="TV" href="#">
                                                    <img src="css/images/icons/tv.png" alt="tv" />
                                                    <span class="spanGType">TV</span> </a></li>-->
                                                <!--onclick="if(NotifyConfig.length > 0){menuNotification_Click(this);}else{alert('please try again...');};"-->
                                                <li><a id="btnNotification" class="ui-link" name="Notification" href="#" onclick="if(IsAuthenticated){if(NotifyConfig.length > 0 && GSceneConfig.length > 0 && LTypeConfig.length > 0 && ITypeConfig.length > 0 && ISubTypeConfig.length > 0){menuNotification_Click(this);}else{alert('Error while loading configuration. Please check network connection.');};}else{alert('User authentication failed. Please check username and password.');};">
                                                    <img src="css/images/icons/notification.png" alt="Notification" />
                                                    <span class="spanGType">Notification</span> </a></li>
                                                <li><a id="btnSchedule" class="ui-link" name="Schedule" href="#" onclick="if(IsAuthenticated){if(ScheduleConfig.length > 0 && GSceneConfig.length > 0 && LTypeConfig.length > 0 && ITypeConfig.length > 0 && ISubTypeConfig.length > 0){menuSchedule_Click(this);}else{alert('Error while loading configuration. Please check network connection.');};}else{alert('User authentication failed. Please check username and password.');};">
                                                    <img src="css/images/icons/schedule.png" alt="Schedule" />
                                                    <span class="spanGType">Schedule</span> </a></li>
                                                <li><a id="btnSettings" class="ui-link" name="setting" href="#" data-rel="dialog"
                                                    onclick="OpenSettingsWindow();">
                                                    <img src="css/images/icons/settings.png" alt="setting" />
                                                    <span class="spanGType">Settings</span> </a></li>
                                                <!--<li><a id="btnLogout" class="ui-link" name="Logout" href="#" onclick="Logout();">
                                                    <img src="css/images/icons/signoutred.png" alt="logout" />
                                                    <span class="spanGType">Sign Out</span> </a></li>-->
                                            </ul>
                                            <div class="clearfix">
                                            </div>
                                            <center>
                                                <h1>
                                                    <label style="display: inline-block">
                                                        <b>©</b></label>&nbsp;<label id="lblCopyright" style="display: inline-block">
                                                            <b>2015 Harikrupa Automation (P) Ltd.</b></label>
                                                </h1>
                                            </center>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="swiper-scrollbar">
                            </div>
                        </div>
                        <!--       <footer>-->
                        <!--<center>
                            <h1>
                                <label style="display: inline-block">
                                    <b>©</b></label>&nbsp;&nbsp;&nbsp;<label style="display: inline-block">
                                        <b>2014 Harikrupa Automation (P) Ltd.</b></label>
                            </h1>
                        </center>-->
                        <!--</footer>-->
                    </div>
                </div>
            </div>
        </div>
        <!--<div data-role="footer" data-position="fixed">-->
        <!--</div>-->
    </div>
    <!--Page 1-Light content-->
    <div data-role="page" id="lightPage" data-transition="none" data-title="GS3" style="background-color: #F6FCF7;">
        <div data-role="header">
            <h1>
                <b>
                    <label id="lblPageHeader_1" style="font-size: 18px; font-weight: bolder">
                        Light
                    </label>
                </b>
            </h1>
            <a href="#" onclick="btnBack();">
                <img src="css/images/icons/back.png" alt="" title="" width="16px" /></a> <a href="#"
                    onclick="GoToHome();">
                    <img src="css/images/icons/home.png" alt="" title="" width="16px" /></a>
        </div>
        <!-- /header -->
        <div role="main" class="ui-content">
            <div align="center">
                <fieldset class="ui-field-contain" style="width: 75%">
                    <select id="selLocation_1" data-mini="true" onchange="BindInterfaceList('1');">
                        <!--<option value="">Select Location</option>
                        <option value="LR">L Room</option>
                        <option value="RR">R Room</option>-->
                    </select>
                    <select id="selInterface_1" data-mini="true" onchange="loadInterfaceDetails('1',true);">
                        <!--<option value="">Select Interface</option>
                        <option value="B1">Bulb 1</option>
                        <option value="B2">Bulb 2</option>-->
                    </select>
                </fieldset>
                <fieldset class="ui-field-contain" style="width: 95%">
                    <div>
                        <a href="#">
                            <img id="img_1" src="css/images/icons/noimg.png" alt="lightOnOff" />
                            <!-- <span class="spanGType">Lighting</span>-->
                        </a>
                    </div>
                </fieldset>
                <fieldset class="ui-field-contain" style="width: 90%">
                    <div>
                        <a href="#" data-role="button" data-inline="true" onclick="writeOn('1');">ON</a>
                        <a href="#" data-role="button" data-inline="true" onclick="writeOff('1');">OFF</a>
                        <a id="btnMode_1" name="" href="#" data-role="button" data-inline="true" onclick="modeWinShow(this,'1');">
                            MODE</a>
                    </div>
                </fieldset>
            </div>
        </div>
        <!-- /content -->
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#" data-icon="power" class="ui-btn-active" style="background-color: #8cc63f;
                        border-color: #4d6c22;" onclick="Logout();">Sign Out</a></li>
                </ul>
            </div>
        </div>
        <!-- /footer -->
    </div>
    <!-- /page -->
    <!--Page 2-Fan content-->
    <div data-role="page" id="fanPage" data-transition="none" data-title="GS3" style="background-color: #F6FCF7;">
        <div data-role="header">
            <h1>
                <b>
                    <label id="lblPageHeader_2" style="font-size: 18px; font-weight: bolder">
                        Fan
                    </label>
                </b>
            </h1>
            <a href="#" onclick="btnBack();">
                <img src="css/images/icons/back.png" alt="" title="" width="16px" /></a> <a href="#"
                    onclick="GoToHome();">
                    <img src="css/images/icons/home.png" alt="" title="" width="16px" /></a>
        </div>
        <!-- /header -->
        <div role="main" class="ui-content">
            <div align="center">
                <fieldset class="ui-field-contain" style="width: 75%">
                    <select id="selLocation_2" data-mini="true" onchange="BindInterfaceList('2');">
                    </select>
                    <select id="selInterface_2" data-mini="true" onchange="loadInterfaceDetails('2',true);">
                    </select>
                </fieldset>
                <!--<input id="knop_2" class="knob" data-angleoffset="-125" data-anglearc="250" data-fgcolor="#66EE66"
                    data-rotation="clockwise" value="0" data-min="0" data-max="10" data-step="2"
                    data-thickness=".5" data-enhance="false" data-readonly="true" />-->
                <fieldset class="ui-field-contain" style="width: 95%">
                    <div id="knopParentOfParentDiv_2" style="width: auto; height: 240px">
                        <div id="knopParentDiv_2" style="display: none">
                            <input id="knop_2" class="knob" data-angleoffset="-125" data-anglearc="250" data-fgcolor="#66EE66"
                                data-rotation="clockwise" value="0" data-min="0" data-max="5" data-step="1" data-thickness=".5"
                                data-enhance="false" />
                        </div>
                    </div>
                    <a href="#" id="lblStatus_2" class="ui-shadow ui-btn ui-corner-all ui-btn-inline ui-btn-icon-right ui-icon-info">
                        Fan Status :</a>
                    <!--ui-icon-alert , info ,greenBtn, redBtn -->
                </fieldset>
                <fieldset class="ui-field-contain" style="width: 90%">
                    <div>
                        <a href="#" data-role="button" data-inline="true" onclick="writeOn('2');">ON</a>
                        <a href="#" data-role="button" data-inline="true" onclick="writeOff('2');">OFF</a>
                        <a id="btnMode_2" name="" href="#" data-role="button" data-inline="true" onclick="modeWinShow(this,'2');">
                            MODE</a>
                    </div>
                </fieldset>
            </div>
        </div>
        <!-- /content -->
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <!-- <li><a href="#" data-icon="home" class="ui-btn-active" style="background-color: #8cc63f;
                        border-color: #4d6c22;">Home</a></li>-->
                    <li><a href="#" data-icon="power" class="ui-btn-active" style="background-color: #8cc63f;
                        border-color: #4d6c22;" onclick="Logout();">Sign Out</a></li>
                </ul>
            </div>
        </div>
        <!-- /footer -->
    </div>
    <!-- /page -->
    <!--Page 3-Dimmer content-->
    <div data-role="page" id="dimmerPage" data-transition="none" data-title="GS3" style="background-color: #F6FCF7;">
        <div data-role="header">
            <h1>
                <b>
                    <label id="lblPageHeader_3" style="font-size: 18px; font-weight: bolder">
                        Dimmer
                    </label>
                </b>
            </h1>
            <a href="#" onclick="btnBack();">
                <img src="css/images/icons/back.png" alt="" title="" width="16px" /></a> <a href="#"
                    onclick="GoToHome();">
                    <img src="css/images/icons/home.png" alt="" title="" width="16px" /></a>
        </div>
        <!-- /header -->
        <div role="main" class="ui-content">
            <div align="center">
                <fieldset class="ui-field-contain" style="width: 75%">
                    <select id="selLocation_3" data-mini="true" onchange="BindInterfaceList('3');">
                    </select>
                    <select id="selInterface_3" data-mini="true" onchange="loadInterfaceDetails('3',true);">
                    </select>
                </fieldset>
                <fieldset class="ui-field-contain" style="width: 95%">
                    <div id="knopParentOfParentDiv_3" style="width: auto; height: 240px">
                        <div id="knopParentDiv_3" style="display: none">
                            <input id="knop_3" class="knob" data-angleoffset="-125" data-anglearc="250" data-fgcolor="#66EE66"
                                data-rotation="clockwise" value="0" data-min="0" data-max="100" data-step="5"
                                data-thickness=".5" data-enhance="false" />
                        </div>
                    </div>
                    <a href="#" id="lblStatus_3" class="ui-shadow ui-btn ui-corner-all ui-btn-inline ui-btn-icon-right ui-icon-info">
                        Dimmer Status :</a>
                </fieldset>
                <fieldset class="ui-field-contain" style="width: 90%">
                    <div>
                        <a href="#" data-role="button" data-inline="true" onclick="writeOn('3');">ON</a>
                        <a href="#" data-role="button" data-inline="true" onclick="writeOff('3');">OFF</a>
                        <a id="btnMode_3" name="" href="#" data-role="button" data-inline="true" onclick="modeWinShow(this,'3');"
                            style="display: none">MODE</a>
                    </div>
                </fieldset>
            </div>
        </div>
        <!-- /content -->
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <!-- <li><a href="#" data-icon="home" class="ui-btn-active" style="background-color: #8cc63f;
                        border-color: #4d6c22;">Home</a></li>-->
                    <li><a href="#" data-icon="power" class="ui-btn-active" style="background-color: #8cc63f;
                        border-color: #4d6c22;" onclick="Logout();">Sign Out</a></li>
                </ul>
            </div>
        </div>
        <!-- /footer -->
    </div>
    <!-- /page -->
    <!--Page 5 content-->
    <div data-role="page" id="plugPage" data-transition="none" data-title="GS3" style="background-color: #F6FCF7;">
        <div data-role="header">
            <h1>
                <b>
                    <label id="lblPageHeader_5" style="font-size: 18px; font-weight: bolder">
                        Plug
                    </label>
                </b>
            </h1>
            <a href="#" onclick="btnBack();">
                <img src="css/images/icons/back.png" alt="" title="" width="16px" /></a> <a href="#"
                    onclick="GoToHome();">
                    <img src="css/images/icons/home.png" alt="" title="" width="16px" /></a>
        </div>
        <!-- /header -->
        <div role="main" class="ui-content">
            <div align="center">
                <fieldset class="ui-field-contain" style="width: 75%">
                    <select id="selLocation_5" data-mini="true" onchange="BindInterfaceList('5');">
                    </select>
                    <select id="selInterface_5" data-mini="true" onchange="loadInterfaceDetails('5',true);">
                    </select>
                </fieldset>
                <fieldset class="ui-field-contain" style="width: 95%">
                    <div>
                        <a href="#">
                            <img id="img_5" src="css/images/icons/plug2.png" alt="PlugOnOff" />
                        </a>
                    </div>
                </fieldset>
                <fieldset class="ui-field-contain" style="width: 90%">
                    <div>
                        <a href="#" data-role="button" data-inline="true" onclick="writeOn('5');">ON</a>
                        <a href="#" data-role="button" data-inline="true" onclick="writeOff('5');">OFF</a>
                        <a id="btnMode_5" name="" href="#" data-role="button" data-inline="true" onclick="modeWinShow(this,'5');">
                            MODE</a>
                    </div>
                </fieldset>
            </div>
        </div>
        <!-- /content -->
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <!--  <li><a href="#" data-icon="home" class="ui-btn-active" style="background-color: #8cc63f;
                        border-color: #4d6c22;">Home</a></li>-->
                    <li><a href="#" data-icon="power" class="ui-btn-active" style="background-color: #8cc63f;
                        border-color: #4d6c22;" onclick="Logout();">Sign Out</a></li>
                </ul>
            </div>
        </div>
        <!-- /footer -->
    </div>
    <!-- /page -->
    <!--Page 7 content-->
    <div data-role="page" id="irACPage" data-transition="none" data-title="GS3" style="background-color: #F6FCF7;">
        <div data-role="header">
            <h1>
                <b>
                    <label id="lblPageHeader_7" style="font-size: 18px; font-weight: bolder">
                        IR-AC
                    </label>
                </b>
            </h1>
            <a href="#" onclick="btnBack();">
                <img src="css/images/icons/back.png" alt="" title="" width="16px" /></a> <a href="#"
                    onclick="GoToHome();">
                    <img src="css/images/icons/home.png" alt="" title="" width="16px" /></a>
        </div>
        <!-- /header -->
        <div role="main" class="ui-content">
            <div align="center">
                <fieldset class="ui-field-contain" style="width: 75%">
                    <select id="selLocation_7" data-mini="true" data-inline="true" onchange="BindInterfaceList('7');">
                    </select>
                    <select id="selInterface_7" data-mini="true" data-inline="true" onchange="loadInterfaceDetails('7',true);">
                    </select>
                </fieldset>
                <!--<fieldset data-corners="true" style="background-color: black; border-radius: 12px;
                    width: 250px; height: 140px; opacity: 0.6">-->
                <div data-corners="true" style="background-color: black; border-radius: 12px; width: 250px;
                    height: 120px; opacity: 0.6">
                    <table>
                        <tr>
                            <td align="right">
                                <label id="lblIRTemp_7" style="font-size: 55px; color: #15e7f5; padding-top: 50px;
                                    padding-bottom: 25px">
                                    26</label>
                                <!--<label style="display: inline-block; font-size: 45px; color: #15e7f5; padding-top: 50px;
                                        padding-bottom: 25px">
                                        &#8451;</label>-->
                            </td>
                            <td align="left">
                                <label style="display: inline-block; font-size: 45px; color: #15e7f5; padding-top: 50px;
                                    padding-bottom: 25px">
                                    &#8451;</label>
                            </td>
                        </tr>
                    </table>
                </div>
                <!--<div class="ui-field-contain">
                    <label for="flip" class="ui-hidden-accessible">
                        Flip it:</label>
                    <select id="flip" data-role="flipswitch">
                        <option value="animal">Lion</option>
                        <option value="flower">Rose</option>
                    </select>
                </div>-->
                <div style="padding-top: 10px;" data-inline="true">
                    <table>
                        <tbody>
                            <tr>
                                <!-- <td>
                                    <span style="color: black; font-size: 20px; padding-top: 35px; vertical-align: middle;">
                                        Power</span>
                                </td>-->
                                <td style="padding-left: 10px;">
                                    <div class="ui-field-contain">
                                        <label for="flipOnOff_7" class="ui-hidden-accessible">
                                            Power :</label>
                                        <select name="flipOnOff_7" id="flipOnOff_7" data-role="slider" data-theme="b" onchange="WriteIRFlipOnOff('7');">
                                            <option value="off">Power OFF</option>
                                            <option value="on">Power ON</option>
                                        </select>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div style="padding-top: 15px;" data-inline="true">
                    <!--<fieldset style="padding-top: 15px;" data-inline="true">-->
                    <table>
                        <tbody>
                            <tr>
                                <td style="padding: 5px;">
                                    <a class="btnCool" onclick="WriteIRCommand('7','7',false,false);"></a><span style="color: black;
                                        margin-left: 25px">Cool</span>
                                </td>
                                <td style="padding: 5px;">
                                    <a class="btnPowerOn" onclick="WriteIRCommand('5','7',false,false);"></a><span style="color: black;
                                        margin-left: 31px">On</span>
                                </td>
                                <td style="padding: 5px;">
                                    <a class="btnPowerOff" onclick="WriteIRCommand('6','7',false,false);"></a><span style="color: black;
                                        margin-left: 30px">Off</span>
                                </td>
                            </tr>
                            <tr>
                                <td style="padding: 5px;">
                                    <a class="btnDry" onclick="WriteIRCommand('9','7',false,false);"></a><span style="color: black;
                                        margin-left: 29px">Dry</span>
                                </td>
                                <td style="padding: 5px;">
                                    <a class="btnSwingUp" onclick="WriteIRCommand('12','7',false,false);"></a><span style="color: black;
                                        margin-left: 12px">Swing-On</span>
                                </td>
                                <td rowspan="2" style="background-color: #8A8A8A; border-radius: 12px;">
                                    <a class="btnIncreseTemp" onclick="WriteIRCommand('10','7',true,true);" style="margin-left: 5px;">
                                    </a>
                                    <!--<span style="color: black; font-size: 12px;margin-bottom: 9px; ">Fan</span>-->
                                    <label style="color: black; margin-top: 0px; margin-bottom: 9px; font-size: 12px;
                                        text-align: center;">
                                        Temp</label>
                                    <a class="btnDecreseTemp" onclick="WriteIRCommand('11','7',true,false);" style="margin-left: 5px">
                                    </a>
                                </td>
                            </tr>
                            <tr>
                                <td style="padding: 5px;">
                                    <a class="btnFan" onclick="WriteIRCommand('8','7',false,false);"></a>
                                    <!--<span style="color: black;
                                        margin-left: 29px">Fan</span>-->
                                </td>
                                <td style="padding: 5px;">
                                    <a class="btnSwingDown" onclick="WriteIRCommand('13','7',false,false);"></a>
                                    <!--<span
                                        style="color: black; margin-left: 4px">Swing-Off</span>-->
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table>
                        <tbody>
                            <tr>
                                <td>
                                    <span style="color: black; margin-left: -67px; font-size: 12px;">Fan</span>
                                </td>
                                <td>
                                    <span style="color: black; margin-left: 3px; font-size: 12px;">Swing-Off</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- /content -->
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#" data-icon="power" class="ui-btn-active" style="background-color: #8cc63f;
                        border-color: #4d6c22;" onclick="Logout();">Sign Out</a></li>
                </ul>
            </div>
        </div>
        <!-- /footer -->
    </div>
    <!-- /page -->
    <!-- Page 6 content -->
    <div data-role="page" id="localScenePage" data-transition="none" data-title="GS3"
        style="background-color: #F6FCF7;">
        <div data-role="header">
            <h1>
                <b>
                    <label id="lblPageHeader_6" style="font-size: 18px; font-weight: bolder">
                        Local Scene
                    </label>
                </b>
            </h1>
            <a href="#" onclick="btnBack();">
                <img src="css/images/icons/back.png" alt="" title="" width="16px" /></a> <a href="#"
                    onclick="GoToHome();">
                    <img src="css/images/icons/home.png" alt="" title="" width="16px" /></a>
        </div>
        <!-- /header -->
        <div role="main" class="ui-content">
            <div align="center">
                <fieldset class="ui-field-contain" style="width: 75%">
                    <select id="selLocation_6" data-mini="true" onchange="BindLSceneList('6',true);">
                        <!--<option value="">Select Location</option>
                        <option value="LR">L Room</option>
                        <option value="RR">R Room</option>-->
                    </select>
                    <!-- <select id="selInterface_7" data-mini="true" onchange="loadlocalScenesInterfaceDetails(true);">                        
                    </select>-->
                </fieldset>
                <fieldset class="ui-field-contain" style="width: 98%">
                    <div>
                        <label id="lblErrorMsg_6" style="font-size: 14px; color: Red;">
                        </label>
                        <ul data-role="listview" id="sceneList_6" data-split-icon="right" data-split-theme="a"
                            data-inset="true">
                            <!-- <li><a href="#">
                                <h1>
                                    Light 1</h1>
                            </a><a href="#" class="ui-btn ui-icon-red ui-nodisc-icon ui-btn-icon-right" style="width: 4.5em;">
                            </a></li>
                            <li><a href="#">
                                <h1>
                                    Light 2</h1>
                            </a><a href="#" class="ui-btn ui-icon-green ui-nodisc-icon ui-btn-icon-right" style="width: 4.5em;">
                            </a></li>   -->
                        </ul>
                    </div>
                </fieldset>
                <!--<fieldset class="ui-field-contain" style="width: 90%">
                    <div>
                        <a href="#" data-role="button" data-inline="true" onclick="writeTemperatureAppliancesOn();">
                            ON</a> <a href="#" data-role="button" data-inline="true" onclick="writeTemperatureAppliancesOff();">
                                OFF</a> <a id="A12" name="btnTemperatureMode" href="#" data-role="button" data-inline="true"
                                    onclick="modeWinShow(this,'6');">MODE</a>
                    </div>
                </fieldset>-->
            </div>
        </div>
        <!-- /content -->
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#" data-icon="power" class="ui-btn-active" style="background-color: #8cc63f;
                        border-color: #4d6c22;" onclick="Logout();">Sign Out</a></li>
                </ul>
            </div>
        </div>
        <!-- /footer -->
    </div>
    <!-- /page -->
    <!-- Page global content -->
    <div data-role="page" id="globalScenePage" data-transition="none" data-title="GS3"
        style="background-color: #F6FCF7;">
        <div data-role="header">
            <h1>
                <b>
                    <label id="lblGScenePageHeader" style="font-size: 18px; font-weight: bolder">
                        Global Scene
                    </label>
                </b>
            </h1>
            <a href="#" onclick="btnBack();">
                <img src="css/images/icons/back.png" alt="" title="" width="16px" /></a> <a href="#"
                    onclick="GoToHome();">
                    <img src="css/images/icons/home.png" alt="" title="" width="16px" /></a>
        </div>
        <!-- /header -->
        <div role="main" class="ui-content">
            <div align="center">
                <fieldset class="ui-field-contain" style="width: 98%">
                    <div>
                        <label id="lblGSceneErrorMsg" style="font-size: 14px; color: Red;">
                        </label>
                        <ul data-role="listview" id="GSceneList" data-theme="b" data-inset="true">
                            <!--<li><a href="#">
                                <h1>
                                    Light 2</h1>
                            </a><a href="#" class="ui-btn ui-icon-green ui-nodisc-icon ui-btn-icon-right" style="width: 4.5em;">
                            </a></li>-->
                        </ul>
                    </div>
                </fieldset>
                <!--<fieldset class="ui-field-contain" style="width: 90%">
                    <div>
                        <a href="#" data-role="button" data-inline="true" onclick="writeTemperatureAppliancesOn();">
                            ON</a> <a href="#" data-role="button" data-inline="true" onclick="writeTemperatureAppliancesOff();">
                                OFF</a> <a id="A12" name="btnTemperatureMode" href="#" data-role="button" data-inline="true"
                                    onclick="modeWinShow(this,'6');">MODE</a>
                    </div>
                </fieldset>-->
            </div>
        </div>
        <!-- /content -->
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#" data-icon="power" class="ui-btn-active" style="background-color: #8cc63f;
                        border-color: #4d6c22;" onclick="Logout();">Sign Out</a></li>
                </ul>
            </div>
        </div>
        <!-- /footer -->
    </div>
    <!-- /page -->
    <!-- Page Notification content -->
    <div data-role="page" id="notificationPage" data-transition="none" data-title="GS3"
        style="background-color: #F6FCF7;">
        <div data-role="header">
            <h1>
                <b>
                    <label id="lblNotificationPageHeader" style="font-size: 18px; font-weight: bolder">
                        Notification
                    </label>
                </b>
            </h1>
            <a href="#" onclick="btnBack();">
                <img src="css/images/icons/back.png" alt="" title="" width="16px" /></a> <a href="#"
                    onclick="GoToHome();">
                    <img src="css/images/icons/home.png" alt="" title="" width="16px" /></a>
        </div>
        <!-- /header -->
        <div role="main" class="ui-content">
            <div align="center">
                <fieldset class="ui-field-contain" style="width: 98%">
                    <div>
                        <label id="lblNotificationErrorMsg" style="font-size: 14px; color: Red;">
                        </label>
                        <ul data-role="listview" id="NotificationList" data-theme="b" data-inset="true">
                            <!--<li class="ui-li-has-alt ui-first-child ui-last-child">
                                <label class="ui-btn tap" style="font-size: 18px; margin-right: 1.5em; border-right-width: 1px;
                                    text-align: left; margin-bottom: -5px;">
                                    Light 4
                                </label>
                                <span class="ui-li-count ui-body-inherit" style="font-size: 18px; padding: 0 0;">
                                    <select id="Select1" data-role="slider" name="testslider" class="ui-li-count ui-body-inherit">
                                        <option value="off">Disable</option>
                                        <option value="on">Enable</option>
                                    </select></span> </li>
                            <li class="ui-li-has-alt ui-first-child ui-last-child">
                                <label class="ui-btn tap" style="font-size: 18px; margin-right: 1.5em; border-right-width: 1px;
                                    text-align: left; margin-bottom: -5px;">
                                    Light 4
                                </label>
                                <span class="ui-li-count ui-body-inherit" style="font-size: 18px; padding: 0 0;">
                                    <select id="Select2" data-role="slider" name="testslider" class="ui-li-count ui-body-inherit">
                                        <option value="off">Disable</option>
                                        <option value="on">Enable</option>
                                    </select></span> </li>
                            <li class="ui-li-has-alt ui-first-child ui-last-child">
                                <label class="ui-btn tap" style="font-size: 18px; margin-right: 1.5em; border-right-width: 1px;
                                    text-align: left; margin-bottom: -5px;">
                                    Light 4
                                </label>
                                <span class="ui-li-count ui-body-inherit" style="font-size: 18px; padding: 0 0;">
                                    <select id="Select3" data-role="slider" name="testslider" class="ui-li-count ui-body-inherit">
                                        <option value="off">Disable</option>
                                        <option value="on">Enable</option>
                                    </select></span> </li>
                            <li class="ui-li-has-alt ui-first-child ui-last-child">
                                <label class="ui-btn tap" style="font-size: 18px; margin-right: 1.5em; border-right-width: 1px;
                                    text-align: left; margin-bottom: -5px;">
                                    Light 4
                                </label>
                                <span class="ui-li-count ui-body-inherit" style="font-size: 18px; padding: 0 0;">
                                    <select id="Select4" data-role="slider" name="testslider" class="ui-li-count ui-body-inherit">
                                        <option value="off">Disable</option>
                                        <option value="on">Enable</option>
                                    </select></span> </li>-->
                        </ul>
                    </div>
                </fieldset>
                <!--<fieldset class="ui-field-contain" style="width: 90%">
                    <div>
                        <a href="#" data-role="button" data-inline="true" onclick="writeTemperatureAppliancesOn();">
                            ON</a> <a href="#" data-role="button" data-inline="true" onclick="writeTemperatureAppliancesOff();">
                                OFF</a> <a id="A12" name="btnTemperatureMode" href="#" data-role="button" data-inline="true"
                                    onclick="modeWinShow(this,'6');">MODE</a>
                    </div>
                </fieldset>-->
            </div>
        </div>
        <!-- /content -->
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#" data-icon="power" class="ui-btn-active" style="background-color: #8cc63f;
                        border-color: #4d6c22;" onclick="Logout();">Sign Out</a></li>
                </ul>
            </div>
        </div>
        <!-- /footer -->
    </div>
    <!-- /page -->
    <!-- Page Schedule content -->
    <div data-role="page" id="schedulePage" data-transition="none" data-title="GS3" style="background-color: #F6FCF7;">
        <div data-role="header">
            <h1>
                <b>
                    <label id="lblSchedulePageHeader" style="font-size: 18px; font-weight: bolder">
                        Schedule
                    </label>
                </b>
            </h1>
            <a href="#" onclick="btnBack();">
                <img src="css/images/icons/back.png" alt="" title="" width="16px" /></a> <a href="#"
                    onclick="GoToHome();">
                    <img src="css/images/icons/home.png" alt="" title="" width="16px" /></a>
        </div>
        <!-- /header -->
        <div role="main" class="ui-content">
            <div align="center">
                <fieldset class="ui-field-contain" style="width: 98%">
                    <div>
                        <label id="lblScheduleErrorMsg" style="font-size: 14px; color: Red;">
                        </label>
                        <ul data-role="listview" id="ScheduleList" data-theme="b" data-inset="true">
                        </ul>
                    </div>
                </fieldset>
            </div>
        </div>
        <!-- /content -->
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#" data-icon="power" class="ui-btn-active" style="background-color: #8cc63f;
                        border-color: #4d6c22;" onclick="Logout();">Sign Out</a></li>
                </ul>
            </div>
        </div>
        <!-- /footer -->
    </div>
    <!-- /page -->
    <!-- Mode Page -->
    <div id="modeDialogPage" data-role="page" data-title="GS3" data-transition="none">
        <!--<div data-role="header" id="Div10" data-position="fixed" style="height: 40px; font-size: 18px;
            font-weight: bolder">
            <h1 id="lblmodeDialogPagePageHeader">
            </h1>
        </div>-->
        <div data-role="header">
            <h1>
                <b>
                    <label id="lblModeDialogHeader" style="font-size: 18px; font-weight: bolder">
                        Change Mode
                    </label>
                </b>
            </h1>
            <!-- <a href="#" onclick="btnBack();">
                <img src="css/images/icons/back.png" alt="" title="" width="16px" /></a> <a href="#"
                    onclick="GoToHome();">
                    <img src="css/images/icons/home.png" alt="" title="" width="16px" /></a>-->
        </div>
        <div data-role="content" style="background-color: #F6FCF7;">
            <!-- role="main" class="ui-content">-->
            <div align="center">
                <fieldset class="ui-field-contain" style="width: 65%">
                    <select name="s_Mode" id="SelSimpleMode" data-mini="true">
                        <!--<option value="1" style="font-size: 15px; padding: 6px;">Switch Only</option>-->
                        <option value="2" style="font-size: 15px; padding: 6px;">Dual</option>
                        <option value="3" style="font-size: 15px; padding: 6px;">Remote Only</option>
                    </select>
                </fieldset>
                <fieldset class="ui-field-contain" style="width: 75%">
                    <a href="#" data-role="button" id="sTagWrite_btn" name="sTagWrite_btn" class="write"
                        data-mini="true" data-inline="true" style="background: #8CC63F;" onclick="writeSimpleMode(this)">
                        Done</a> <a href="#" data-role="button" id="A13" data-mini="true" data-inline="true"
                            style="background: #3090C7;" data-rel="back">Back</a>
                    <!--onclick="Dimmer_Back_Click();"-->
                </fieldset>
            </div>
        </div>
        <!--<div data-role="content" id="Div11">
            <div style="float: left; width: 60%" id="Div12" class="ui-field-contain">
                <label for="s_Mode">
                    Mode:</label>
            </div>
            <br />
            <center>
                <div style="width: 200px; padding-top: 86px;">
                    <center>
                    </center>
                </div>
            </center>
        </div>-->
    </div>
    <!-- /page -->
    <!--Setting Page -->
    <div data-role="page" id="settingDialogPage" data-title="GS3" data-transition="none">
        <div data-role="header">
            <h1>
                <b>
                    <label id="lblSettingDialogHeader" style="font-size: 18px; font-weight: bolder">
                        Settings
                    </label>
                </b>
            </h1>
        </div>
        <div data-role="content">
            <div data-role="tabs" id="myTabs">
                <div data-role="navbar">
                    <!-- <div id="tabs" data-role="navbar"> style="display: none;"-->
                    <ul>
                        <li><a id="t1" href="#tabs-1" data-theme="a" data-ajax="false" class="ui-btn-active">
                            GS3 Settings</a></li>
                        <li><a id="t3" href="#tabs-3" data-theme="a" data-ajax="false">Time Settings</a></li>
                        <li><a id="t2" href="#tabs-2" data-theme="a" data-ajax="false">Change Password</a></li>
                    </ul>
                </div>
                <!--</div>-->
                <div id="tabs-1">
                    <center>
                        <fieldset class="ui-field-contain" style="width: 90%">
                            <input type="text" id="username" placeholder="Username" style="height: 30px; text-align: center;
                                background-color: Gray; font-weight: bold; font-size: 16px;" />
                            <input type="password" id="password" placeholder="Password" style="height: 30px;
                                text-align: center; background-color: Gray; font-weight: bold; font-size: 16px;" />
                            <input type="text" id="ip" placeholder="Server Address" style="height: 30px; text-align: center;
                                background-color: Gray; font-weight: bold; font-size: 16px;" />
                            <input type="text" id="port" placeholder="Port" style="height: 30px; text-align: center;
                                background-color: Gray; font-weight: bold; font-size: 16px;" />
                            <input type="text" id="delay" placeholder="Set Delay" style="height: 30px; text-align: center;
                                background-color: Gray; font-weight: bold; font-size: 16px;" />
                            <!--<input type="text" id="dimmermf" placeholder="Set Dimmer MF" style="height: 30px;
                                text-align: center; background-color: Gray; font-weight: bold; font-size: 16px;" />-->
                        </fieldset>
                        <fieldset class="ui-field-contain" style="width: 75%">
                            <a href="#" data-role="button" id="save" onclick="SaveSettings()" data-inline="true"
                                style="font-weight: bold; background: #8CC63F;" data-mini="true">Update</a>
                            <a href="#" data-rel="back" data-role="button" id="btnSettingBack" data-inline="true"
                                style="font-weight: bold; background: #3090C7;" data-mini="true">Back</a>
                        </fieldset>
                    </center>
                </div>
                <div id="tabs-2">
                    <center>
                        <fieldset class="ui-field-contain" style="width: 90%">
                            <input type="password" id="newPassword" placeholder="New Password" style="height: 30px;
                                text-align: center; background-color: Gray; font-weight: bold; font-size: 16px;" />
                            <input type="password" id="confirmPassword" placeholder="Confirm Password" style="height: 30px;
                                text-align: center; background-color: Gray; font-weight: bold; font-size: 16px;" />
                        </fieldset>
                        <fieldset class="ui-field-contain" style="width: 75%">
                            <a href="#" data-role="button" id="A1" onclick="changePassword()" data-inline="true"
                                style="font-weight: bold; background: #8CC63F;" data-mini="true">Change Password</a>
                            <a href="#" data-rel="back" data-role="button" id="A2" data-inline="true" style="font-weight: bold;
                                background: #3090C7;" data-mini="true">Back</a>
                        </fieldset>
                    </center>
                </div>
                <div id="tabs-3">
                    <center>
                        <fieldset class="ui-field-contain" style="width: 90%">
                            <center>
                                <label id="lbldatetime">
                                </label>
                            </center>
                            <a href="#" data-role="button" id="B1" data-inline="true" style="font-weight: bold;
                                background: #8CC63F;" data-mini="true" onclick="btnSetDateTime_click();">Update
                                Time To Controller</a>
                        </fieldset>
                    </center>
                </div>
                <!--<div id="tabs-3">
                    <center>
                        <fieldset class="ui-field-contain" style="width: 90%">
                            <input type="text" id="lblCurrDateTime" placeholder="CurrentTime" style="height: 30px;
                                text-align: center; background-color: Gray; font-weight: bold; font-size: 16px;"
                                disabled="disabled" />
                        </fieldset>
                        <fieldset class="ui-field-contain" style="width: 75%">
                            <a href="#" data-role="button" id="A3" onclick="alert(Math.floor(Date.now() /1000));"
                                data-inline="true" style="font-weight: bold; background: #8CC63F;" data-mini="true">
                                Update</a>
                        </fieldset>
                    </center>
                </div>-->
            </div>
        </div>
    </div>
    <!-- /Page -->
    <!--NotificationDetails Page -->
    <div data-role="page" id="notificationDetailsDialogPage" data-title="GS3" data-transition="none">
        <div data-role="header">
            <h1>
                <b>
                    <label id="lblnotificationDialogHeader" style="font-size: 18px; font-weight: bolder">
                        Notification Details
                    </label>
                </b>
            </h1>
        </div>
        <div data-role="content" style="background-color: #F6FCF7;">
            <center>
                <!--<fieldset class="ui-field-contain" style="width: 90%">
                    <label id="lblEnableDisable" for="NotifyEnableDisable" style="color: #333333; width: 200px;">
                        notification:</label>
                    <select name="NotifyEnableDisable" id="NotifyEnableDisable" data-role="slider" data-theme="b"
                        onchange="if($('#NotifyEnableDisable').val()==1){$('#divforNotifyOtherDetails').hide();}else{$('#divforNotifyOtherDetails').show();};">
                        <option value="1">Disable</option>
                        <option value="2">Enable</option>
                    </select>
                </fieldset>-->
                <div class="ui-grid-a">
                    <div class="ui-block-a">
                        <label id="lblEnableDisable" for="NotifyEnableDisable" style="color: Black; padding-right: 5px;
                            padding-top: 15px;">
                            notification</label>
                    </div>
                    <div class="ui-block-b" style="font-size: 1.8em">
                        <select name="NotifyEnableDisable" id="NotifyEnableDisable" data-role="slider" data-theme="b"
                            onchange="if($('#NotifyEnableDisable').val()==1){$('#divforNotifyOtherDetails').hide();}else{$('#divforNotifyOtherDetails').show();};">
                            <option value="1">Disable</option>
                            <option value="2">Enable</option>
                        </select>
                    </div>
                </div>
                <fieldset class="ui-field-contain" style="width: 90%">
                    <a href="#" id="lblNotifyLocation" data-role="button" data-inline="false" style="font-weight: bold;"
                        data-mini="true">-</a> <a href="#" id="lblNotifyInterface" data-role="button" data-inline="false"
                            style="font-weight: bold;" data-mini="true">-</a>
                </fieldset>
                <div id="divforNotifyOtherDetails" style="width: 90%;">
                    <fieldset data-role="controlgroup" data-type="horizontal" data-role="fieldcontain"
                        data-mini="true">
                        <legend class="ui-field-contain" style="color: #333333;">Trigger action</legend>
                        <label for="smsNotify">
                            <!--style="font-weight: lighter;"-->
                            Sms</label>
                        <input type="radio" name="notifyBy" id="smsNotify" value="0" checked data-theme="b" />
                        <label for="callNotify">
                            Call</label>
                        <input type="radio" name="notifyBy" id="callNotify" value="1" data-theme="b" />
                        <label for="smscallNotify">
                            Both</label>
                        <input type="radio" name="notifyBy" id="smscallNotify" value="2" data-theme="b" />
                        <label for="noneNotify">
                            None</label>
                        <input type="radio" name="notifyBy" id="noneNotify" value="9" data-theme="b" />
                    </fieldset>
                    <fieldset data-role="controlgroup" data-type="horizontal" data-role="fieldcontain"
                        data-mini="true">
                        <!--<legend class="ui-field-contain" style="color: #333333;">Notification Trigger:</legend>-->
                        <label for="nEdge">
                            Negative edge</label>
                        <input type="radio" name="notifyOn" id="nEdge" value="0" checked data-theme="b" />
                        <label for="pEdge">
                            Positive edge</label>
                        <input type="radio" name="notifyOn" id="pEdge" value="1" data-theme="b" />
                    </fieldset>
                    <div class="ui-grid-a">
                        <div class="ui-block-a">
                            <label style="color: Black; padding-right: 5px; padding-top: 15px;">
                                Global Scene:</label>
                        </div>
                        <div class="ui-block-b">
                            <select id="NotifyGSceneList" data-mini="true" data-theme="b">
                            </select>
                        </div>
                    </div>
                    <!-- </fieldset>-->
                </div>
                <!--<fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">
                        <legend class="ui-field-contain" style="color: #333333;">Global scene</legend>                      
                        <select id="NotifyGSceneList" data-mini="true" data-theme="b">
                        </select>
                    </fieldset>-->
                <a href="#" id="btnWriteNotification" data-role="button" onclick="WriteNotificationUpdate(this)"
                    name="btnWriteNotification" data-inline="true" style="font-weight: bold; background: #8CC63F;"
                    data-mini="true">Update</a> <a href="#" data-rel="back" data-role="button" data-inline="true"
                        style="font-weight: bold; background: #3090C7;" data-mini="true">Back</a>
            </center>
        </div>
    </div>
    <!-- /Page -->
    <!--ScheduleDetails Page -->
    <div data-role="page" id="scheduleDetailsDialogPage" data-title="GS3" data-transition="none">
        <div data-role="header">
            <h1>
                <b>
                    <label id="lblscheduleDialogHeader" style="font-size: 18px; font-weight: bolder">
                        Schedule Details
                    </label>
                </b>
            </h1>
        </div>
        <div data-role="content" style="background-color: #F6FCF7;">
            <div align="center">
                <form id="mySchedulefrm">
                <div class="ui-grid-a">
                    <div class="ui-block-a">
                        <!-- <fieldset data-role="fieldcontain">-->
                        <label id="lblScheduleEnableDisable" style="color: Black; padding-right: 5px; padding-top: 15px;">
                            schedule:</label>
                        <!--</fieldset>-->
                    </div>
                    <div class="ui-block-b" style="font-size: 1.8em">
                        <!--<div class="containing-element" style="font-size: 1.8em">
                            <!--<fieldset data-role="fieldcontain">-->
                        <select id="ScheduleEnableDisable" name="ScheduleEnableDisable" data-role="slider"
                            data-theme="b" onchange="if($('#ScheduleEnableDisable').val()=='1'){if($('#scheduleParentDiv').hasClass('ui-disabled')){$('#scheduleParentDiv').removeClass('ui-disabled');}}else{if(!$('#scheduleParentDiv').hasClass('ui-disabled')){$('#scheduleParentDiv').addClass('ui-disabled');}};">
                            <option value="0">Disable</option>
                            <option value="1">Enable</option>
                        </select>
                        <!--</fieldset>-->
                        <!--</div>-->
                    </div>
                </div>
                <div id="scheduleParentDiv">
                    <div class="ui-grid-a">
                        <div class="ui-block-a">
                            <label style="color: Black; padding-right: 5px; padding-top: 15px;">
                                Global Scene:</label></center>
                        </div>
                        <div class="ui-block-b">
                            <select id="ScheduleGSceneList" name="ScheduleGSceneList" data-mini="true" data-theme="b">
                            </select>
                        </div>
                    </div>
                    <!--<fieldset data-role="fieldcontain">
                    <center>
                        <label style="color: Black;">
                            Global Scene:</label></center>
                </fieldset>
                <fieldset data-role="fieldcontain" style="width: 65%">
                    <select id="ScheduleGSceneList" name="ScheduleGSceneList" data-mini="true" data-theme="b">
                      
                    </select>
                </fieldset>-->
                    <div class="ui-grid-a">
                        <div class="ui-block-a">
                            <label for="everymonday" style="font-size: 12px">
                                <input type="checkbox" id="chkMon" name="days" value="Mon" data-theme="b" />Monday</label>
                        </div>
                        <div class="ui-block-b">
                            <label for="everytuesday" style="font-size: 12px">
                                <input type="checkbox" id="chkTue" name="days" value="Tue" data-theme="b" />Tuesday</label>
                        </div>
                        <div class="ui-block-a">
                            <label for="everywednesday" style="font-size: 12px">
                                <input type="checkbox" id="chkWed" name="days" value="Wed" data-theme="b" />Wednesday</label>
                        </div>
                        <div class="ui-block-b">
                            <label for="everythursday" style="font-size: 12px">
                                <input type="checkbox" id="chkThu" name="days" value="Thu" data-theme="b" />Thursday</label>
                        </div>
                        <div class="ui-block-a">
                            <label for="everyfriday" style="font-size: 12px">
                                <input type="checkbox" id="chkFri" name="days" value="Fri" data-theme="b" />Friday</label>
                        </div>
                        <div class="ui-block-b">
                            <label for="everysaturday" style="font-size: 12px">
                                <input type="checkbox" id="chkSat" name="days" value="Sat" data-theme="b" />Saturday</label>
                        </div>
                        <div class="ui-block-a">
                            <label for="everysunday" style="font-size: 12px">
                                <input type="checkbox" id="chkSun" name="days" value="Sun" data-theme="b" />Sunday</label>
                        </div>
                    </div>
                    <div class="ui-grid-a">
                        <div class="ui-block-a">
                            <label style="padding-top: 10px; color: Black">
                                Schedule Time:</label></div>
                        <div class="ui-block-b">
                            <input name="scheduleTime" id="scheduleTime" type="text" data-role="datebox" data-theme="b"
                                data-options='{"mode":"timebox", "useNewStyle":true, "overrideTimeFormat": 24, "themeButton": "b", "themeInput": "a", "theme": "b", "themeHeader": "b"}' />
                        </div>
                    </div>
                    <div id="daysErr">
                    </div>
                </div>
                <!--<input name="scheduleTime" id="scheduleTime" type="text" data-role="datebox" data-options='{"mode":"timebox", "useNewStyle":true, "overrideTimeFormat": 12, "themeButton": "b", "themeInput": "a", "theme": "b", "themeHeader": "b"}' />-->
                <a href="#" id="btnWriteSchedule" name="btnWriteSchedule" data-role="button" data-inline="true"
                    style="font-weight: bold; background: #8CC63F;" data-mini="true" onclick="WriteScheduleUpdate(this);">
                    Update</a> <a href="#" data-rel="back" data-role="button" data-inline="true" style="font-weight: bold;
                        background: #3090C7;" data-mini="true">Back</a>
                </form>
            </div>
        </div>
    </div>
    <!-- /Page -->
    <!-- Change Password -->
    <!--<div data-role="page" id="passwordChangeDialogPage" data-title="GS3" data-transition="none">
            <div data-role="header">
                <h1>
                    <b>
                        <label id="lblpasswordChangeDialogHeader" style="font-size: 18px; font-weight: bolder">
                            Password Change
                        </label>
                    </b>
                </h1>
            </div>
            <div data-role="content" style="background-color: #F6FCF7;">
                <center>
                    <fieldset class="ui-field-contain" style="width: 90%">
                    </fieldset>
                    <a href="#" data-role="button" onclick="WritePasswordChange(this)" name="btnWritePasswordChange"
                        data-inline="true" style="font-weight: bold; background: #8CC63F;" data-mini="true">
                        Change Password</a> <a href="#" data-rel="back" data-role="button" data-inline="true"
                            style="font-weight: bold; background: #3090C7;" data-mini="true">Back</a>
                </center>
            </div>
        </div>-->
    <!-- /Page -->
    <div data-role="dialog" id="errorDialog" data-title="GS3" data-transition="none">
        <div data-role="header">
            <h1 style="font-size: 18px; font-weight: bolder">
                <b>Error</b>
            </h1>
        </div>
        <div data-role="content">
            <center>
                <label style="color: White; font-weight: bold" id="lblError">
                </label>
                <a href="#" data-rel="back" data-role="button" id="A9" data-rel="back" data-inline="true"
                    style="font-weight: bold; background: #3090C7;" data-mini="true">Back</a>
            </center>
        </div>
    </div>
    <!-- JS Script -->
    <script src="Js/jquery-1.10.2.min.js" type="text/javascript"></script>
    <script src="Js/jquery.mobile-1.4.2.min.js" type="text/javascript"></script>
    <script src="Js/jquery.validate.min.js" type="text/javascript"></script>
    <!--  If Want to build Mobile app remove cordova.js comment below-->
    <script src="phonegap.js"></script>
    <script type="text/javascript">
        var UUIDConfig = [];
        var IRConfig = [];
        var GSceneConfig = [];
        var NotifyConfig = [];
        var ScheduleConfig = [];
        var SlaveConfig = [];

        //get enum type
        var LTypeConfig = [];
        var ITypeConfig = [];
        var ISubTypeConfig = [];

        var IsAllConfigurationsLoaded = false;

        //$.mobile.allowCrossDomainPages = true;
        var uniqueAutoLoadingInfo;
        var isBrowser = false; //If Used in browser then 'true' and for mobile app make it 'false'.
        var timer;
        var chkConnectionDelay = 10000;
        var chkConnectionTimer;
        var delay = 1000;
        //var dimmermf = 10;

        var IsAuthenticated = false;
        //var token = "";                     //Token
        var username = "";                  //Username
        var password = "";                  //Password
        var ip = "";                        //IP
        var port = "";                     //Port        
        // var activePage = "";                //Set ActivePage id/name
        //var pageChange = false;
        //var tagflag = false;                //For recurcivly upadate Tag's Value on TagPage
        //var tagIds = [];                    //TagID Array       
        //var t_gid = "";                     //Temp GroupID
        //var t_gname = "";                 //Temp GroupName            
        //var wDimmerTagID = -1;              //Set When Dimmer Write Window open.
        //var chkDimmersValue = true;         //For recurcivly upadate Dimmer Dialog Tag's Value


        $(document).on("mobileinit", function () {
            $.mobile.defaultPageTransition = 'none';
            $.mobile.transitionFallbacks = 'none';
        });
        $(document).bind("mobileinit", function () {

            $.mobile.allowCrossDomainPages = true;
        });

        $(document).on('pagechange', function (event) {

            var page = $(':mobile-pagecontainer').pagecontainer('getActivePage')[0].id;

            if (page == "grouptype") {
                window.clearTimeout(timer);
            }

        });

        //        $(document).on("pagecreate", "#notificationDetailsDialogPage", function () {
        //            $("#NotifyGSceneList").empty();
        //            $("#NotifyGSceneList").html("");
        //            $("#NotifyGSceneList").selectmenu("refresh", true);

        //            $("#NotifyGSceneList").append("<option value='0' style='font-size: 15px; padding: 6px;'>None</option>");
        //            for (var i = 0; i < GSceneConfig.length; i++) {
        //                $("#NotifyGSceneList").append("<option value='" + GSceneConfig[i].cid + "_" + GSceneConfig[i].FileId + "' style='font-size: 15px; padding: 6px;'>" + GSceneConfig[i].Name + "</option>");
        //            }
        //        });

        //        $(document).on("pagecreate", "#scheduleDetailsDialogPage", function () {
        //            $("#ScheduleGSceneList").empty();
        //            $("#ScheduleGSceneList").html("");
        //            $("#ScheduleGSceneList").selectmenu("refresh", true);

        //            $("#ScheduleGSceneList").append("<option value='0' style='font-size: 15px; padding: 6px;'>None</option>");
        //            for (var i = 0; i < GSceneConfig.length; i++) {
        //                $("#ScheduleGSceneList").append("<option value='" + GSceneConfig[i].cid + "_" + GSceneConfig[i].FileId + "' style='font-size: 15px; padding: 6px;'>" + GSceneConfig[i].Name + "</option>");
        //            }
        //        });


        $("#scheduleDetailsDialogPage").on("pageinit", function () {

            $("#mySchedulefrm").validate({
                rules: {
                    ScheduleGSceneList: {
                        required: true
                    },
                    scheduleTime: {
                        required: true
                    },
                    days: {
                        required: true
                    }
                },
                messages: {
                    ScheduleGSceneList: {
                        required: "Please select at lest one scene."
                    },
                    scheduleTime: {
                        required: "Please select a schedule time."
                    },
                    days: {
                        required: "Please checked  atleast one day."
                    }
                },

                errorPlacement: function (error, element) {
                    if (element.attr("name") === "ScheduleGSceneList") {
                        error.insertAfter($(element).parent());
                    }
                    else if (element.attr("name") === "days") {
                        error.insertAfter($("#daysErr"));
                    }
                    else {
                        error.insertAfter($(element).parent());
                    }
                }
            });
        });

        function onLoad() {
            document.addEventListener('deviceready', deviceReady, false);

        };

        function deviceReady() {
            document.addEventListener("backbutton", function (e) {
                if ($.mobile.activePage.is('#grouptype')) {
                    e.preventDefault();
                    backButtonCallback();
                }
                else {
                    //pageChange = true;
                    navigator.app.backHistory()
                }
            }, false);

            // navigator.network.isReachable("phonegap.com", reachableCallback, {});

        };

        function backButtonCallback() {
            navigator.notification.confirm('do you want to exit the HK GS3?', confirmCallback);
        };

        function confirmCallback(buttonIndex) {
            if (buttonIndex == 1) {
                navigator.app.exitApp();
                return true;
            }
            else {
                return false;
            }
        };

    </script>
    <script type="text/javascript">
        function LoadSettings() {
            if (typeof (Storage) !== "undefined") {
                //$('#username').attr('value', localStorage.getItem('Username'));
                $('#username').val(localStorage.getItem('Username'));
                $('#password').val(localStorage.getItem('Password'));
                $('#port').val(localStorage.getItem('Port'));
                $('#ip').val(localStorage.getItem('Ip'));
                $('#delay').val(localStorage.getItem('Delay'));
                //$('#dimmermf').val(localStorage.getItem('DimmerMF'));

                username = $('#username').val();
                password = $('#password').val();
                ip = $('#ip').val();
                port = $('#port').val();
                if (localStorage.getItem("Delay") != null) {
                    if (localStorage.getItem("Delay") != "")
                        delay = parseInt($('#delay').val());
                    else
                        delay = 1000;
                }
                else {
                    delay = 1000;
                }

                //                if (localStorage.getItem("DimmerMF") != null) {
                //                    if (localStorage.getItem("DimmerMF") != "")
                //                        dimmermf = parseInt($('#dimmermf').val());
                //                    else
                //                        dimmermf = 10;
                //                }
                //                else {
                //                    dimmermf = 10;
                //                }


                if (localStorage.getItem("SlaveConfig") != null) {
                    SlaveConfig = JSON.parse(localStorage.getItem("SlaveConfig"));
                }
                if (localStorage.getItem("UUIDConfig") != null) {
                    UUIDConfig = JSON.parse(localStorage.getItem("UUIDConfig"));
                }
                if (localStorage.getItem("IRConfig") != null) {
                    IRConfig = JSON.parse(localStorage.getItem("IRConfig"));
                }
                if (localStorage.getItem("GSceneConfig") != null) {
                    GSceneConfig = JSON.parse(localStorage.getItem("GSceneConfig"));
                }
                if (localStorage.getItem("NotifyConfig") != null) {
                    NotifyConfig = JSON.parse(localStorage.getItem("NotifyConfig"));
                }
                if (localStorage.getItem("ScheduleConfig") != null) {
                    ScheduleConfig = JSON.parse(localStorage.getItem("ScheduleConfig"));
                }

                if (localStorage.getItem("LTypeConfig") != null) {
                    LTypeConfig = JSON.parse(localStorage.getItem("LTypeConfig"));
                }
                if (localStorage.getItem("ITypeConfig") != null) {
                    ITypeConfig = JSON.parse(localStorage.getItem("ITypeConfig"));
                }
                if (localStorage.getItem("ISubTypeConfig") != null) {
                    ISubTypeConfig = JSON.parse(localStorage.getItem("ISubTypeConfig"));
                }
                //
                //SettingsAuth();
            }
        };

        function chkConnection(IsMaskShow, callback) {
            if (IsMaskShow) {
                $.mobile.loading("show", {
                    text: 'Authenticating..',
                    textVisible: true,
                    theme: 'a',
                    html: ""
                });
                $('body').append("<div id='loaddiv' class='ui-loader-background'></div>");
            }

            try {
                if ($.mobile.activePage.is("#grouptype")) {
                    try {
                        window.clearTimeout(timer);
                    } catch (msg) { }
                }
            } catch (err) { window.clearTimeout(timer); }

            if (ip != null && username != null && password != null) {
                if (ip != "" && username != "" && password != "") {
                    IsAuthenticatedUser(function (data) {
                        if (data == "true") {
                            if (!IsAllConfigurationsLoaded) {
                                GetLTypeConfiguration(0, function (data) {
                                    GetITypeConfiguration(0, function (data) {
                                        GetISubTypeConfiguration(0, function (data) {
                                            GetSlaveConfiguration(0, function (data) {
                                                LoadUUIDConfiguration(function (data) {
                                                    if (UUIDConfig.length > 0 && data == "true")
                                                        localStorage.setItem("UUIDConfig", JSON.stringify(UUIDConfig));
                                                    LoadIRConfiguration(function (data) {
                                                        if (IRConfig.length > 0 && data == "true")
                                                            localStorage.setItem("IRConfig", JSON.stringify(IRConfig));
                                                        LoadGSceneConfiguration(function (data) {
                                                            if (GSceneConfig.length > 0 && data == "true")
                                                                localStorage.setItem("GSceneConfig", JSON.stringify(GSceneConfig));
                                                            LoadNotifyConfig(function (data) {
                                                                if (NotifyConfig.length > 0 && data == "true")
                                                                    localStorage.setItem("NotifyConfig", JSON.stringify(NotifyConfig));
                                                                LoadScheduleConfig(function (data) {
                                                                    if (ScheduleConfig.length > 0 && data == "true")
                                                                        localStorage.setItem("ScheduleConfig", JSON.stringify(ScheduleConfig));
                                                                    IsAllConfigurationsLoaded = true;
                                                                    chkConnectionTimer = setTimeout(function () {
                                                                        chkConnection(false, function (data) { });
                                                                    }, chkConnectionDelay);
                                                                });
                                                            });
                                                        });
                                                    });
                                                });
                                            });
                                        });
                                    });
                                });
                                //                                GetUUIDConfiguration(function (data) {
                                //                                    GetIRConfiguration(function (data) {
                                //                                        GetGSceneConfiguration(function (data) {
                                //                                            GetNotifyConfig(function (data) {
                                //                                                GetScheduleConfig(function (data) {
                                //                                                    GetLTypeConfiguration(function (data) {
                                //                                                        GetITypeConfiguration(function (data) {
                                //                                                            GetISubTypeConfiguration(function (data) {
                                //                                                                IsAllConfigurationsLoaded = true;
                                //                                                                chkConnectionTimer = setTimeout(function () {
                                //                                                                    chkConnection(false, function (data) { });
                                //                                                                }, chkConnectionDelay);
                                //                                                            });
                                //                                                        });
                                //                                                    });
                                //                                                });
                                //                                            });
                                //                                        });
                                //                                    });
                                //                                });
                            }
                            else {
                                chkConnectionTimer = setTimeout(function () {
                                    chkConnection(false, function (data) { });
                                }, chkConnectionDelay);
                            }

                            if (IsMaskShow) {
                                $.mobile.loading("hide");
                                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                            }

                            callback("true");
                        }
                        else {
                            SlaveConfig = [];
                            localStorage.setItem("SlaveConfig", "[]");

                            UUIDConfig = [];
                            localStorage.setItem("UUIDConfig", "[]");

                            IRConfig = [];
                            localStorage.setItem("IRConfig", "[]");

                            GSceneConfig = [];
                            localStorage.setItem("GSceneConfig", "[]");

                            NotifyConfig = [];
                            localStorage.setItem("NotifyConfig", "[]");

                            ScheduleConfig = [];
                            localStorage.setItem("ScheduleConfig", "[]");

                            LTypeConfig = [];
                            localStorage.setItem("LTypeConfig", "[]");
                            ITypeConfig = [];
                            localStorage.setItem("ITypeConfig", "[]");
                            ISubTypeConfig = [];
                            localStorage.setItem("ISubTypeConfig", "[]");

                            if (IsMaskShow) {
                                $.mobile.loading("hide");
                                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                            }
                            alert("User authentication failed.");
                            callback("false");
                        }


                    });
                }
                else {
                    if (IsMaskShow) {
                        $.mobile.loading("hide");
                        try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                    }
                    alert("GS3 application configuration data is missing or incorrect. PLease verify application settings.");
                    callback("false");
                }

            }
            else {
                if (IsMaskShow) {
                    $.mobile.loading("hide");
                    try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                }
                alert("Error while loading application configuration.");
                callback("false");
            }

        };

        function LoadUUIDConfiguration(callback) {
            //            GetSlaveConfiguration(0, function (data) {
            //                if (data == "true") {
            GetUUIDConfiguration(0, localStorage.getItem('Ip'), localStorage.getItem('Port'), function (data) {
                if (SlaveConfig.length > 0 && data != "false") {
                    var count = 0;
                    for (var i = 0; i < SlaveConfig.length; i++) {
                        GetUUIDConfiguration(SlaveConfig[i].Id, SlaveConfig[i].IP, SlaveConfig[i].Port, function (data) {
                            if (data != "false") {
                                count++;
                                if (count == SlaveConfig.length)
                                    callback(data);
                            }
                            else {
                                callback(data);
                            }
                        });
                    }

                }
                else {
                    callback(data);
                }
            });
            //                }
            //                else {
            //                    GetUUIDConfiguration(0, localStorage.getItem('Ip'), localStorage.getItem('Port'), function (data) {
            //                        callback(data);
            //                    });
            //                }
            //            });
        };

        function LoadIRConfiguration(callback) {
            GetIRConfiguration(0, localStorage.getItem('Ip'), localStorage.getItem('Port'), function (data) {
                if (SlaveConfig.length > 0 && data != "false") {
                    var count = 0;
                    for (var i = 0; i < SlaveConfig.length; i++) {
                        GetIRConfiguration(SlaveConfig[i].Id, SlaveConfig[i].IP, SlaveConfig[i].Port, function (data) {
                            if (data != "false") {
                                count++;
                                if (count == SlaveConfig.length)
                                    callback(data);
                            }
                            else {
                                callback(data);
                            }
                        });
                    }

                }
                else {
                    callback(data);
                }
            });
        };
        function LoadGSceneConfiguration(callback) {
            GetGSceneConfiguration(0, localStorage.getItem('Ip'), localStorage.getItem('Port'), function (data) {
                if (SlaveConfig.length > 0 && data != "false") {
                    var count = 0;
                    for (var i = 0; i < SlaveConfig.length; i++) {
                        GetGSceneConfiguration(SlaveConfig[i].Id, SlaveConfig[i].IP, SlaveConfig[i].Port, function (data) {
                            if (data != "false") {
                                count++;
                                if (count == SlaveConfig.length)
                                    callback(data);
                            }
                            else {
                                callback(data);
                            }
                        });
                    }

                }
                else {
                    callback(data);
                }
            });
        };
        function LoadNotifyConfig(callback) {
            GetNotifyConfig(0, localStorage.getItem('Ip'), localStorage.getItem('Port'), function (data) {
                if (SlaveConfig.length > 0 && data != "false") {
                    var count = 0;
                    for (var i = 0; i < SlaveConfig.length; i++) {
                        GetNotifyConfig(SlaveConfig[i].Id, SlaveConfig[i].IP, SlaveConfig[i].Port, function (data) {
                            if (data != "false") {
                                count++;
                                if (count == SlaveConfig.length)
                                    callback(data);
                            }
                            else {
                                callback(data);
                            }
                        });
                    }

                }
                else {
                    callback(data);
                }
            });
        };
        function LoadScheduleConfig(callback) {
            GetScheduleConfig(0, localStorage.getItem('Ip'), localStorage.getItem('Port'), function (data) {
                if (SlaveConfig.length > 0 && data != "false") {
                    var count = 0;
                    for (var i = 0; i < SlaveConfig.length; i++) {
                        GetScheduleConfig(SlaveConfig[i].Id, SlaveConfig[i].IP, SlaveConfig[i].Port, function (data) {
                            if (data != "false") {
                                count++;
                                if (count == SlaveConfig.length)
                                    callback(data);
                            }
                            else {
                                callback(data);
                            }
                        });
                    }

                }
                else {
                    callback(data);
                }
            });
        };

        function Logout() {
            if (isBrowser) {

                window.clearTimeout(timer);
                //token = "";
                $.mobile.changePage("index.html");
            }
            else {

                //token = "";
                backButtonCallback();
            }
        };

        //Go Home

        function GoToHome() {
            $.mobile.changePage("index.html#grouptype");
        };


        // History Back

        function btnBack() {
            history.back();
        };

        function SaveSettings() {
            if (typeof (Storage) !== "undefined") {
                localStorage.setItem('Username', $('#username').val());
                localStorage.setItem('Password', $('#password').val());
                localStorage.setItem('Ip', $('#ip').val());
                localStorage.setItem('Port', $('#port').val());
                localStorage.setItem('Delay', $('#delay').val());
                //localStorage.setItem('DimmerMF', $('#dimmermf').val());

                SlaveConfig = [];
                localStorage.setItem("SlaveConfig", "[]");

                UUIDConfig = [];
                localStorage.setItem("UUIDConfig", "[]");

                IRConfig = [];
                localStorage.setItem("IRConfig", "[]");

                GSceneConfig = [];
                localStorage.setItem("GSceneConfig", "[]");

                NotifyConfig = [];
                localStorage.setItem("NotifyConfig", "[]");

                ScheduleConfig = [];
                localStorage.setItem("ScheduleConfig", "[]");

                LTypeConfig = [];
                localStorage.setItem("LTypeConfig", "[]");
                ITypeConfig = [];
                localStorage.setItem("ITypeConfig", "[]");
                ISubTypeConfig = [];
                localStorage.setItem("ISubTypeConfig", "[]");

                LoadSettings();

                window.clearTimeout(chkConnectionTimer);
                IsAuthenticated = false;
                IsAllConfigurationsLoaded = false;
                chkConnection(true, function (data) {
                    if (data == "true")
                        $.mobile.back();
                });

            }
            else {
                alert("Browser storege is undefined.");
            }

        };

        function changePassword() {
            $.mobile.loading("show", {
                text: 'Wait..',
                textVisible: true,
                theme: 'a',
                html: ""
            });
            $('body').append("<div id='loaddiv' class='ui-loader-background'></div>");

            var npsw = $("#newPassword").val();
            var cpsw = $("#confirmPassword").val();

            if (npsw.trim() == cpsw.trim()) {
                if (npsw != password) {
                    getChangePasswordInfo(npsw, function (data) {
                        //alert(data.user + ':' + data.pass);
                        var queryStr = "/cp.html";
                        ALSChangePasswordRequest(queryStr, JSON.stringify(data), function (data) {
                            if (data == "true") {
                                localStorage.setItem('Password', npsw);
                                password = npsw;
                                $.mobile.loading("hide");
                                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                                $.mobile.back();
                            }
                            else {
                                $.mobile.loading("hide");
                                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                                alert("An error occurred while change password. PLease retry.");
                            }
                        });
                    });

                }
                else {
                    $.mobile.loading("hide");
                    try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                    $.mobile.back();
                }
            }
            else {

                $.mobile.loading("hide");
                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                alert("Password do not match, Please retype.");
            }
        };

        function GetHandler() {
            return "http://" + ip + ":" + port + "/ALSScheduler/ALSHandler.ashx";
        };

        function GetNewHandler() {
            //            var strPort = localStorage.getItem('Port') == null ? "" : ":" + localStorage.getItem('Port');
            //            strPort = strPort.trim() == ":" ? "" : strPort;
            if (localStorage.getItem('Port') == "")
                return "http://" + localStorage.getItem('Ip'); //+ ":" + port;           
            else
                return "http://" + localStorage.getItem('Ip') + ":" + localStorage.getItem('Port');
        };

        function GetHandlerByControllerID(cid) {

            var handlerStr = "";
            if (cid != 0) {
                for (var i = 0; i < SlaveConfig.length; i++) {

                    if (SlaveConfig[i].Id == cid) {
                        if (SlaveConfig[i].Port.toString() == "")
                            handlerStr = "http://" + SlaveConfig[i].IP;
                        else
                            handlerStr = "http://" + SlaveConfig[i].IP + ":" + SlaveConfig[i].Port;
                        // info.push(SlaveConfig[i]);
                        break;
                    }
                }
            }
            else {
                if (localStorage.getItem('Port') == "")
                    handlerStr = "http://" + localStorage.getItem('Ip'); //+ ":" + port;           
                else
                    handlerStr = "http://" + localStorage.getItem('Ip') + ":" + localStorage.getItem('Port');
                //                try {
                //                    info.push({ "Id": 0, "IP": localStorage.getItem('Ip').toString(), "Port": parseInt(localStorage.getItem('Port')) });
                //                }
                //                catch (err) {
                //                    info.push({ "Id": 0, "IP": localStorage.getItem('Ip').toString(), "Port": localStorage.getItem('Port').toString() });
                //                }
            }
            return handlerStr;



            //            if (localStorage.getItem('Port') == "")
            //                return "http://" + localStorage.getItem('Ip'); //+ ":" + port;           
            //            else
            //                return "http://" + localStorage.getItem('Ip') + ":" + localStorage.getItem('Port');
        };

        $(document).ready(function () {
            //onLoad();
            LoadSettings();
            window.clearTimeout(chkConnectionTimer);
            IsAllConfigurationsLoaded = false;
            chkConnection(true, function (data) { });
            //document.getElementById("lblCopyright").innerHtml = "Hari";
            //$("#lblCopyright").val("Hari");
            $("input[name='days']").on("change", function (event, ui) {
                var cnt = 0;
                $("input:checkbox[name=days]:checked").each(function () {
                    cnt = cnt + 1;
                });
                if (cnt < 2)
                    $("#mySchedulefrm").valid();
            });

            $("#myTabs").on("tap", function (event) {
                if ($("#t3").hasClass('ui-btn-active'))
                    setCurrentDateTime();
            });

        });    
    </script>
    <script src="Js/jquery.knob.min.js" type="text/javascript"></script>
    <script src="Js/jtsage-datebox.min.js" type="text/javascript"></script>
    <script src="Js/hkScript.js" type="text/javascript"></script>
    <script src="Js/aes_index.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function ($) {

            $.mobile.ignoreContentEnabled = true;

            $(".knob").knob({
                change: function (value) {
                    //console.log("change : " + value);
                },
                release: function (value) {
                    // dimmerNewVal = value;
                    if ($.mobile.activePage.is("#fanPage")) {
                        if (dimmerOldVal != value) {
                            writeUsingKnob(value * 2, "2"); //"2" - for Fan;
                            //console.log(value * 2);
                        }
                    }
                    else if ($.mobile.activePage.is("#dimmerPage")) {
                        if (dimmerOldVal != value) {
                            //                                if (dimmerOldVal > value) {
                            //                                    console.log("dimmer down");
                            //                                    console.log("Old" + dimmerOldVal.toString());
                            //                                    console.log("New" + value.toString());
                            //                                }
                            //                                else {
                            //                                    console.log("dimmer up");
                            //                                    console.log("Old" + dimmerOldVal.toString());
                            //                                    console.log("New" + value.toString());
                            //                                }
                            writeUsingKnobForDimmer(dimmerOldVal, value, "3");

                            //writeUsingKnobForDimmer(value * dimmermf, "3"); // 3 for dimmer;
                            //writeUsingKnob(value * dimmermf, "3"); //"3" - for Dimmer;
                            //console.log(value * 2);
                        }
                    }
                },
                cancel: function () {
                    //console.log("cancel : ", this);
                },
                /*format : function (value) {
                return value + '%';
                },*/
                draw: function () {

                    // "tron" case
                    if (this.$.data('skin') == 'tron') {

                        this.cursorExt = 0.3;

                        var a = this.arc(this.cv)  // Arc
                                , pa                   // Previous arc
                                , r = 1;

                        this.g.lineWidth = this.lineWidth;

                        if (this.o.displayPrevious) {
                            pa = this.arc(this.v);
                            this.g.beginPath();
                            this.g.strokeStyle = this.pColor;
                            this.g.arc(this.xy, this.xy, this.radius - this.lineWidth, pa.s, pa.e, pa.d);
                            this.g.stroke();
                        }

                        this.g.beginPath();
                        this.g.strokeStyle = r ? this.o.fgColor : this.fgColor;
                        this.g.arc(this.xy, this.xy, this.radius - this.lineWidth, a.s, a.e, a.d);
                        this.g.stroke();

                        this.g.lineWidth = 2;
                        this.g.beginPath();
                        this.g.strokeStyle = this.o.fgColor;
                        this.g.arc(this.xy, this.xy, this.radius - this.lineWidth + 1 + this.lineWidth * 2 / 3, 0, 2 * Math.PI, false);
                        this.g.stroke();

                        return false;
                    }
                }
            });

            // Example of infinite knob, iPod click wheel
            var v, up = 0, down = 0, i = 0
                    , $idir = $("div.idir")
                    , $ival = $("div.ival")
                    , incr = function () { i++; $idir.show().html("+").fadeOut(); $ival.html(i); }
                    , decr = function () { i--; $idir.show().html("-").fadeOut(); $ival.html(i); };
            $("input.infinite").knob(
                                    {
                                        min: 0
                                    , max: 20
                                    , stopper: false
                                    , change: function () {
                                        if (v > this.cv) {
                                            if (up) {
                                                decr();
                                                up = 0;
                                            } else { up = 1; down = 0; }
                                        } else {
                                            if (v < this.cv) {
                                                if (down) {
                                                    incr();
                                                    down = 0;
                                                } else { down = 1; up = 0; }
                                            }
                                        }
                                        v = this.cv;
                                    }
                                    });
        });
    </script>
    <script type="text/javascript">
        //Get Menu Click
        // var dimmerOnOffTagID = -1;
        var dimmerOldVal = 0;
        // var dimmerNewVal = 0;
        //var IsSetDimIndi_WithoutTouch = false;

        function GetLocationByInterfaceType(iType) {
            var loc = [];
            for (var i = 0; i < UUIDConfig.length; i++) {

                if (UUIDConfig[i].interfaceType == iType) {
                    loc.push(UUIDConfig[i]);
                }
            }
            return loc;

        };

        function GetIRLocationByInterfaceType(iType) {
            var loc = [];
            for (var i = 0; i < IRConfig.length; i++) {

                if (IRConfig[i].interfaceType == iType) {
                    loc.push(IRConfig[i]);
                }
            }
            return loc;
        };


        function GetInterfaceByLocationAndInterfaceType(lType, lNum, iType) {
            var interface = [];
            for (var i = 0; i < UUIDConfig.length; i++) {

                if (UUIDConfig[i].locationType == lType && UUIDConfig[i].locationNumber == lNum && UUIDConfig[i].interfaceType == iType) {
                    interface.push(UUIDConfig[i]);
                }
            }
            return interface;
        };

        function GetIRInterfaceByLocationAndInterfaceType(lType, lNum, iType) {
            var interface = [];
            for (var i = 0; i < IRConfig.length; i++) {

                if (IRConfig[i].locationType == lType && IRConfig[i].locationNumber == lNum && IRConfig[i].interfaceType == iType) {
                    interface.push(IRConfig[i]);
                }
            }
            return interface;
        };

        //        function GetPCWRTInfo(busID, deviceID, channelId) {
        //            var info = [];
        //            for (var i = 0; i < UUIDConfig.length; i++) {

        //                if (UUIDConfig[i].busId == busID && UUIDConfig[i].deviceId == deviceID && UUIDConfig[i].attribute == 4 && UUIDConfig[i].channelId == channelId) {
        //                    info.push(UUIDConfig[i]);
        //                    break;
        //                }
        //            }

        //            return info;

        //        };

        function GetModeInfo(cid, busID, deviceID, channelId) {
            var info = [];
            for (var i = 0; i < UUIDConfig.length; i++) {

                if (UUIDConfig[i].cid == cid && UUIDConfig[i].busId == busID && UUIDConfig[i].deviceId == deviceID && UUIDConfig[i].attribute == 2 && UUIDConfig[i].channelId == channelId) {
                    info.push(UUIDConfig[i]);
                    break;
                }
            }

            return info;

        };

        function GetSaveConfigInfo(cid, busID, deviceID) {
            var info = [];
            for (var i = 0; i < UUIDConfig.length; i++) {

                if (UUIDConfig[i].cid == cid && UUIDConfig[i].busId == busID && UUIDConfig[i].deviceId == deviceID && UUIDConfig[i].attribute == 11) {
                    info.push(UUIDConfig[i]);
                    break;
                }
            }

            return info;

        };


        function GetUUIDConfigById(cid, id) {
            var configInfo = [];
            for (var i = 0; i < UUIDConfig.length; i++) {

                if (UUIDConfig[i].cid == cid && UUIDConfig[i].Id == id) {
                    configInfo.push(UUIDConfig[i]);
                    break;
                }
            }
            return configInfo;
        };

        function GetUUIDConfigByInterfaceSubType(cid, lType, lNum, iType, iNum, iSubType) {
            var configInfo = [];
            for (var i = 0; i < UUIDConfig.length; i++) {

                if (UUIDConfig[i].cid == cid && UUIDConfig[i].locationType == lType && UUIDConfig[i].locationNumber == lNum && UUIDConfig[i].interfaceType == iType && UUIDConfig[i].interfaceNumber == iNum && UUIDConfig[i].interfaceSubType == iSubType) {
                    configInfo.push(UUIDConfig[i]);
                    break;
                }
            }
            return configInfo;
        };

        function GetIRConfigById(cid, id) {
            var configInfo = [];
            for (var i = 0; i < IRConfig.length; i++) {

                if (IRConfig[i].cid == cid && IRConfig[i].Id == id) {
                    configInfo.push(IRConfig[i]);
                    break;
                }
            }
            return configInfo;
        };

        function GetIRCommand(cid, lType, lNum, iType, iNum, paramType) {
            var irInfo = [];
            for (var i = 0; i < IRConfig.length; i++) {
                if (IRConfig[i].cid == cid && IRConfig[i].parameterType == paramType && IRConfig[i].locationType == lType && IRConfig[i].locationNumber == lNum && IRConfig[i].interfaceType == iType && IRConfig[i].interfaceNumber == iNum) {
                    irInfo.push(IRConfig[i]);
                    break;
                }
            }
            return irInfo;
        };

        function GetNotifyConfigById(cid, id) {
            var configInfo = [];
            for (var i = 0; i < NotifyConfig.length; i++) {

                if (NotifyConfig[i].cid == cid && NotifyConfig[i].Id == id) {
                    configInfo.push(NotifyConfig[i]);
                    break;
                }
            }
            return configInfo;
        };

        function GetScheduleConfigById(cid, id) {
            var configInfo = [];
            for (var i = 0; i < ScheduleConfig.length; i++) {

                if (ScheduleConfig[i].cid == cid && ScheduleConfig[i].Id == id) {
                    configInfo.push(ScheduleConfig[i]);
                    break;
                }
            }
            return configInfo;
        };

        function GetGSceneConfigByCID(cid) {
            var Info = [];
            for (var i = 0; i < GSceneConfig.length; i++) {

                if (GSceneConfig[i].cid == cid) {
                    Info.push(GSceneConfig[i]);
                }
            }
            return Info;
        };

        function getLocationTypeName(lType) {
            var rtnString = "";
            for (var i = 0; i < LTypeConfig.length; i++) {
                if (LTypeConfig[i].Id == lType) {
                    rtnString = LTypeConfig[i].Name
                    break;
                }
            }
            return rtnString;
            //            switch (lType) {
            //                case 1:
            //                    rtnString = "Living Room";
            //                    break;
            //                case 2:
            //                    rtnString = "Kitchen";
            //                    break;
            //                case 3:
            //                    rtnString = "Bathroom";
            //                    break;
            //                case 4:
            //                    rtnString = "Bedroom";
            //                    break;
            //                case 5:
            //                    rtnString = "Storeroom";
            //                    break;
            //                case 6:
            //                    rtnString = "Servant room";
            //                    break;
            //                case 7:
            //                    rtnString = "Entrance";
            //                    break;
            //                case 8:
            //                    rtnString = "Lobby";
            //                    break;
            //                case 9:
            //                    rtnString = "Terrace";
            //                    break;
            //                case 10:
            //                    rtnString = "Garden";
            //                    break;
            //                case 11:
            //                    rtnString = "Wash Area";
            //                    break;
            //                case 12:
            //                    rtnString = "Dining";
            //                    break;
            //                case 13:
            //                    rtnString = "Pooja Room";
            //                    break;
            //                case 14:
            //                    rtnString = "Master bedroom";
            //                    break;
            //                case 15:
            //                    rtnString = "Kid’s Room";
            //                    break;
            //                case 16:
            //                    rtnString = "Parent’s Room";
            //                    break;
            //                case 17:
            //                    rtnString = "Life Style Room";
            //                    break;
            //                case 18:
            //                    rtnString = "Library";
            //                    break;
            //                case 19:
            //                    rtnString = "Home Theatre";
            //                    break;
            //                case 20:
            //                    rtnString = "Study Room";
            //                    break;
            //                case 21:
            //                    rtnString = "Family Area";
            //                    break;
            //                case 22:
            //                    rtnString = "Balcony";
            //                    break;
            //                case 23:
            //                    rtnString = "Vestibule";
            //                    break;
            //                case 24:
            //                    rtnString = "Parking";
            //                    break;
            //                case 25:
            //                    rtnString = "Garden";
            //                    break;
            //            }

        };

        function getInterfaceTypeName(iType) {
            var rtnString = "";
            for (var i = 0; i < ITypeConfig.length; i++) {
                if (ITypeConfig[i].Id == iType) {
                    rtnString = ITypeConfig[i].Name
                    break;
                }
            }
            return rtnString;
            //            switch (iType) {
            //                case 1:
            //                    rtnString = "Light";
            //                    break;
            //                case 2:
            //                    rtnString = "Fan";
            //                    break;
            //                case 3:
            //                    rtnString = "Dimmer";
            //                    break;
            //                case 4:
            //                    rtnString = "AC";
            //                    break;
            //                case 5:
            //                    rtnString = "Plug";
            //                    break;
            //                case 6:
            //                    rtnString = "Local Scene";
            //                    break;
            //                case 7:
            //                    rtnString = "IR-AC";
            //                    break;

            //            }
            //            return rtnString;
        };

        function getInterfaceSubTypeName(iSubType) {
            var rtnString = "";
            for (var i = 0; i < ISubTypeConfig.length; i++) {
                if (ISubTypeConfig[i].Id == iSubType) {
                    rtnString = ISubTypeConfig[i].Name
                    break;
                }
            }
            return rtnString;
            //            switch (iSubType) {
            //                case 1:
            //                    rtnString = "Ceiling";
            //                    break;
            //                case 2:
            //                    rtnString = "Bracket";
            //                    break;
            //                case 3:
            //                    rtnString = "Focus";
            //                    break;
            //                case 4:
            //                    rtnString = "LED";
            //                    break;
            //                case 5:
            //                    rtnString = "Zhumar";
            //                    break;
            //                case 6:
            //                    rtnString = "Night Lamp";
            //                    break;
            //                case 7:
            //                    rtnString = "AC";
            //                    break;
            //                case 8:
            //                    rtnString = "TV";
            //                    break;
            //                case 9:
            //                    rtnString = "Set-Top Box";
            //                    break;
            //                case 10:
            //                    rtnString = "CPU";
            //                    break;
            //                case 11:
            //                    rtnString = "Monitor";
            //                    break;
            //                case 12:
            //                    rtnString = "AV System";
            //                    break;
            //                case 13:
            //                    rtnString = "Oven";
            //                    break;
            //                case 14:
            //                    rtnString = "Fridge";
            //                    break;
            //                case 15:
            //                    rtnString = "Water Heater";
            //                    break;
            //                case 16:
            //                    rtnString = "Room Heater";
            //                    break
            //                case 17:
            //                    rtnString = "Chimney";
            //                    break
            //                case 18:
            //                    rtnString = "Water Purifier";
            //                    break
            //                case 19:
            //                    rtnString = "Dishwasher";
            //                    break
            //                case 20:
            //                    rtnString = "Vaccum Cleaner";
            //                    break
            //                case 21:
            //                    rtnString = "Washing Machine";
            //                    break
            //                case 22:
            //                    rtnString = "Printer";
            //                    break
            //                case 23:
            //                    rtnString = "Laptop";
            //                    break
            //                case 24:
            //                    rtnString = "Networking Device";
            //                    break
            //            }
            //            return rtnString;
        };


        function clearLocationSelBox(iType) {
            $("#selLocation_" + iType).empty();
            $("#selLocation_" + iType).html("");
            $("#selLocation_" + iType).selectmenu("refresh", true);
        };

        function clearInterfaceSelBox(iType) {
            $("#selInterface_" + iType).empty();
            $("#selInterface_" + iType).html("");
            $("#selInterface_" + iType).selectmenu("refresh", true);
        };


        function SetImageSrc(iType, val) {
            //            try {
            //                $("#img_" + iType).attr('src', url);
            //            }
            //            catch (err) {
            //            }
            var loc = "css/images/icons/noimg.png";
            switch (iType) {
                case "1": //Light
                    if (val == "10") {
                        loc = "css/images/icons/bulbON.png";
                    }
                    else {
                        loc = "css/images/icons/bulbOFF.png";
                    }
                    break;
                case "2": //Fan  
                    break;
                case "3": //Dimmer  
                    break;
                case "4": //AC  
                    break;
                case "5": //Plug                
                    if (val == "10") {
                        loc = "css/images/icons/plugON.png";
                    }
                    else {
                        loc = "css/images/icons/plugOFF.png";
                    }
                    break;
                default:
                    loc = "css/images/icons/noimg.png";
                    break;
            }
            try { $("#img_" + iType).attr('src', loc); } catch (err) { }
        };

        function ResetImageSrc(iType) {
            try {
                var loc = "css/images/icons/noimg.png";
                $("#img_" + iType).attr('src', loc);
            }
            catch (err) {
            }
        };
        function setKnobOffImgShow(iType) {
            try {
                // $("#knopParentOfParentDiv_" + iType).style;width: auto; height: 240px
                document.getElementById("knopParentOfParentDiv_" + iType).style.background = "url('css/images/icons/dimmeroff.png') no-repeat top center";
                document.getElementById("knopParentOfParentDiv_" + iType).style.width = "auto";
                document.getElementById("knopParentOfParentDiv_" + iType).style.height = "240px";
            }
            catch (err) { }
        };
        function setKnobOffImgHide(iType) {
            try {
                // $("#knopParentOfParentDiv_" + iType).style;
                document.getElementById("knopParentOfParentDiv_" + iType).style.background = "none";
                document.getElementById("knopParentOfParentDiv_" + iType).style.width = "auto";
                document.getElementById("knopParentOfParentDiv_" + iType).style.height = "240px";
            }
            catch (err) { }
        };
        function setKnobHide(iType) {
            try {
                // $("#knop_" + iType).siblings("canvas").remove();
                //                if ($("#knop_" + iType).attr("data-readOnly") == 'false') {
                //                    $("#knop_" + iType).unwrap().attr("data-readOnly", true).data("kontroled", "").data("readonly", true).knob();
                //                }
                $("#knopParentDiv_" + iType).hide();
                //$("#knop_" + iType).val("0").trigger("change");
            }
            catch (err) { }
        };
        function setKnobShow(iType) {
            try {
                // $("#knop_" + iType).siblings("canvas").remove();
                //                if ($("#knop_" + iType).attr("data-readOnly") == 'true') {
                //                    $("#knop_" + iType).unwrap().removeAttr("data-readOnly readonly").data("kontroled", "").data("readonly", false).knob();
                //                }
                $("#knopParentDiv_" + iType).show();
                //$("#knop_" + iType).val("0").trigger("change");
            }
            catch (err) { }
        };

        function setFanDimmerStatusIcon(iType, cssClass) {
            try {
                if (!$("#lblStatus_" + iType).hasClass(cssClass)) {
                    switch (cssClass) {
                        case "ui-icon-info":
                            $("#lblStatus_" + iType).removeClass("ui-icon-greenBtn");
                            $("#lblStatus_" + iType).removeClass("ui-icon-redBtn");
                            break;
                        case "ui-icon-greenBtn":
                            $("#lblStatus_" + iType).removeClass("ui-icon-info");
                            $("#lblStatus_" + iType).removeClass("ui-icon-redBtn");
                            break;
                        case "ui-icon-redBtn":
                            $("#lblStatus_" + iType).removeClass("ui-icon-info");
                            $("#lblStatus_" + iType).removeClass("ui-icon-greenBtn");
                            break;
                    }

                    $("#lblStatus_" + iType).addClass(cssClass);
                }
            }
            catch (err) { }

        };

        function setKnobIndicator(iType, val) {
            try {
                dimmerOldVal = val;
                $("#knop_" + iType).val(val.toString()).trigger("change");
            }
            catch (err) { }
        };

        function setIRPowerONOffStatus(iType, textval) {
            try {
                $("#flipOnOff_" + iType).val(textval).slider("refresh");
                //$("#flipOnOff_" + iType).flipswitch('refresh');
            }
            catch (err) {
            }

        };

        function SetAutoLoading(iType, currentInfo, actMinRequestCnt) {
            //            var actAjaxReq = "activeRequest : " + $.active;
            //            console.log(actAjaxReq);
            window.clearTimeout(timer);
            if (uniqueAutoLoadingInfo.cid == currentInfo.cid && uniqueAutoLoadingInfo.Id == currentInfo.Id && $.active < actMinRequestCnt) {
                if ($.mobile.activePage.is("#lightPage") && iType == "1") {
                    timer = setTimeout(function () {
                        loadInterfaceDetails("1", false);
                    }, delay);
                }
                else if ($.mobile.activePage.is("#fanPage") && iType == "2") {
                    timer = setTimeout(function () {
                        loadInterfaceDetails("2", false);
                    }, delay);
                }
                else if ($.mobile.activePage.is("#dimmerPage") && iType == "3") {
                    timer = setTimeout(function () {
                        loadInterfaceDetails("3", false);
                    }, delay);
                }
                else if ($.mobile.activePage.is("#plugPage") && iType == "5") {
                    timer = setTimeout(function () {
                        loadInterfaceDetails("5", false);
                    }, delay);
                }
                else if ($.mobile.activePage.is("#irACPage") && iType == "7") {
                    timer = setTimeout(function () {
                        loadInterfaceDetails("7", false);
                    }, delay);
                }
                else if ($.mobile.activePage.is("#modeDialogPage")) {
                    timer = setTimeout(function () {
                        loadInterfaceDetails(iType, false);
                    }, delay);
                }
            }
        };

        function menuGScene_Click(el) {
            $.mobile.loading("show", {
                text: 'Wait..',
                textVisible: true,
                theme: 'a',
                html: ""
            });

            $('body').append("<div id='loaddiv' class='ui-loader-background'> </div>");

            document.getElementById("lblGScenePageHeader").innerHTML = el.name;

            //"lblGSceneErrorMsg" for Error.

            $("#GSceneList").html("");


            for (var i = 0; i < GSceneConfig.length; i++) {
                if (i == 0)
                    $("#GSceneList").append('<li class="ui-li-has-alt ui-first-child "><a href="#" class="ui-btn tap" style="margin-right: 4.5em;"><h1>' + GSceneConfig[i].Name + '</h1></a><a href="#" id="scenes_' + GSceneConfig[i].cid + '_' + GSceneConfig[i].FileId + '" class="ui-btn ui-icon-arrowright ui-nodisc-icon ui-btn-icon-right ui-btn-icon-notext ui-icon-right ui-btn-a" style="width: 4.5em;" onclick="WriteGlobalScene(' + GSceneConfig[i].cid + ',\'' + GSceneConfig[i].FileId + '\');"></a></li>');
                else if (i == (GSceneConfig.length - 1))
                    $("#GSceneList").append('<li class="ui-li-has-alt ui-last-child"><a href="#" class="ui-btn tap" style="margin-right: 4.5em;"><h1>' + GSceneConfig[i].Name + '</h1></a><a href="#" id="scenes_' + GSceneConfig[i].cid + '_' + GSceneConfig[i].FileId + '" class="ui-btn ui-icon-arrowright ui-nodisc-icon ui-btn-icon-right ui-btn-icon-notext ui-icon-right ui-btn-a" style="width: 4.5em;" onclick="WriteGlobalScene(' + GSceneConfig[i].cid + ',\'' + GSceneConfig[i].FileId + '\');"></a></li>');
                else
                    $("#GSceneList").append('<li class="ui-li-has-alt"><a href="#" class="ui-btn tap" style="margin-right: 4.5em;"><h1>' + GSceneConfig[i].Name + '</h1></a><a href="#" id="scenes_' + GSceneConfig[i].cid + '_' + GSceneConfig[i].FileId + '" class="ui-btn ui-icon-arrowright ui-nodisc-icon ui-btn-icon-right ui-btn-icon-notext ui-icon-right ui-btn-a" style="width: 4.5em;" onclick="WriteGlobalScene(' + GSceneConfig[i].cid + ',\'' + GSceneConfig[i].FileId + '\');"></a></li>');
            }

            $.mobile.changePage("index.html#globalScenePage");
            //activePage = "globalScenePage";

            //            $("#sceneList_" + iType).append('<li class="ui-li-has-alt ui-first-child ui-last-child"><a href="#" class="ui-btn tap" style="margin-right: 4.5em;"><h1>Scene' + 1 + '</h1></a><a href="#" id="scenes_' + 1 + '" class="ui-btn ui-icon-green ui-nodisc-icon ui-btn-icon-right ui-btn-icon-notext ui-icon-right ui-btn-a" style="width: 4.5em;" onclick="alert("sceneWrite");"></a></li>');
            //            $("#sceneList_" + iType).append('<li class="ui-li-has-alt ui-first-child ui-last-child"><a href="#" class="ui-btn tap" style="margin-right: 4.5em;"><h1>Scene' + 2 + '</h1></a><a href="#" id="scenes_' + 2 + '" class="ui-btn ui-icon-red ui-nodisc-icon ui-btn-icon-right ui-btn-icon-notext ui-icon-right ui-btn-a" style="width: 4.5em;" onclick="alert("sceneWrite");"></a></li>');
            //            $("#sceneList_" + iType).append('<li class="ui-li-has-alt ui-first-child ui-last-child"><a href="#" class="ui-btn tap" style="margin-right: 4.5em;"><h1>Scene' + 3 + '</h1></a><a href="#" id="scenes_' + 3 + '" class="ui-btn ui-icon-red ui-nodisc-icon ui-btn-icon-right ui-btn-icon-notext ui-icon-right ui-btn-a" style="width: 4.5em;" onclick="alert("sceneWrite");"></a></li>');

            $.mobile.loading("hide");
            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
        };

        function menuNotification_Click(el) {

            $.mobile.loading("show", {
                text: 'Wait..',
                textVisible: true,
                theme: 'a',
                html: ""
            });

            $('body').append("<div id='loaddiv' class='ui-loader-background'> </div>");


            document.getElementById("lblNotificationPageHeader").innerHTML = el.name;

            //"lblNotificationErrorMsg" for Error.

            $("#NotificationList").html("");

            for (var i = 0; i < NotifyConfig.length; i++) {
                var strLocation = getLocationTypeName(NotifyConfig[i].locationType) + " - " + NotifyConfig[i].locationNumber;
                var strInterface = getInterfaceTypeName(NotifyConfig[i].interfaceType) + " - " + getInterfaceSubTypeName(NotifyConfig[i].interfaceSubType) + "-" + NotifyConfig[i].interfaceNumber;
                if (i == 0)
                    $("#NotificationList").append('<li class="ui-li-has-alt ui-first-child"><a href="#" class="ui-btn tap" style="margin-right: 4.5em;"><h1>' + NotifyConfig[i].name + '</h1></a><a href="#" id="notify_' + NotifyConfig[i].cid + '_' + NotifyConfig[i].Id + '" class="ui-btn ui-icon-custconfig ui-nodisc-icon ui-btn-icon-right ui-btn-icon-notext ui-icon-right ui-btn-a" style="width: 4.5em;" onclick="OpenNotificationDialog(' + NotifyConfig[i].cid + ',\'' + NotifyConfig[i].Id + '\',\'' + NotifyConfig[i].name + '\',\'' + strLocation + '\',\'' + strInterface + '\');"></a></li>');
                else if (i == (NotifyConfig.length - 1))
                    $("#NotificationList").append('<li class="ui-li-has-alt ui-last-child"><a href="#" class="ui-btn tap" style="margin-right: 4.5em;"><h1>' + NotifyConfig[i].name + '</h1></a><a href="#" id="notify_' + NotifyConfig[i].cid + '_' + NotifyConfig[i].Id + '" class="ui-btn ui-icon-custconfig ui-nodisc-icon ui-btn-icon-right ui-btn-icon-notext ui-icon-right ui-btn-a" style="width: 4.5em;" onclick="OpenNotificationDialog(' + NotifyConfig[i].cid + ',\'' + NotifyConfig[i].Id + '\',\'' + NotifyConfig[i].name + '\',\'' + strLocation + '\',\'' + strInterface + '\');"></a></li>');
                else
                    $("#NotificationList").append('<li class="ui-li-has-alt"><a href="#" class="ui-btn tap" style="margin-right: 4.5em;"><h1>' + NotifyConfig[i].name + '</h1></a><a href="#" id="notify_' + NotifyConfig[i].cid + '_' + NotifyConfig[i].Id + '" class="ui-btn ui-icon-custconfig ui-nodisc-icon ui-btn-icon-right ui-btn-icon-notext ui-icon-right ui-btn-a" style="width: 4.5em;" onclick="OpenNotificationDialog(' + NotifyConfig[i].cid + ',\'' + NotifyConfig[i].Id + '\',\'' + NotifyConfig[i].name + '\',\'' + strLocation + '\',\'' + strInterface + '\');"></a></li>');
            }

            $.mobile.changePage("index.html#notificationPage");

            $.mobile.loading("hide");
            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
        };

        function menuSchedule_Click(el) {
            $.mobile.loading("show", {
                text: 'Wait..',
                textVisible: true,
                theme: 'a',
                html: ""
            });

            $('body').append("<div id='loaddiv' class='ui-loader-background'> </div>");


            document.getElementById("lblSchedulePageHeader").innerHTML = el.name;

            //"lblNotificationErrorMsg" for Error.

            $("#ScheduleList").html("");

            for (var i = 0; i < ScheduleConfig.length; i++) {
                if (i == 0)
                    $("#ScheduleList").append('<li class="ui-li-has-alt ui-first-child"><a href="#" class="ui-btn tap" style="margin-right: 4.5em;"><h1>' + ScheduleConfig[i].name + '</h1></a><a href="#" id="schedule_' + ScheduleConfig[i].cid + '_' + ScheduleConfig[i].Id + '" class="ui-btn ui-icon-custconfig ui-nodisc-icon ui-btn-icon-right ui-btn-icon-notext ui-icon-right ui-btn-a" style="width: 4.5em;" onclick="OpenScheduleDialog(' + ScheduleConfig[i].cid + ',\'' + ScheduleConfig[i].Id + '\',\'' + ScheduleConfig[i].name + '\');"></a></li>');
                else if (i == (ScheduleConfig.length - 1))
                    $("#ScheduleList").append('<li class="ui-li-has-alt ui-last-child"><a href="#" class="ui-btn tap" style="margin-right: 4.5em;"><h1>' + ScheduleConfig[i].name + '</h1></a><a href="#" id="schedule_' + ScheduleConfig[i].cid + '_' + ScheduleConfig[i].Id + '" class="ui-btn ui-icon-custconfig ui-nodisc-icon ui-btn-icon-right ui-btn-icon-notext ui-icon-right ui-btn-a" style="width: 4.5em;" onclick="OpenScheduleDialog(' + ScheduleConfig[i].cid + ',\'' + ScheduleConfig[i].Id + '\',\'' + ScheduleConfig[i].name + '\');"></a></li>');
                else
                    $("#ScheduleList").append('<li class="ui-li-has-alt"><a href="#" class="ui-btn tap" style="margin-right: 4.5em;"><h1>' + ScheduleConfig[i].name + '</h1></a><a href="#" id="schedule_' + ScheduleConfig[i].cid + '_' + ScheduleConfig[i].Id + '" class="ui-btn ui-icon-custconfig ui-nodisc-icon ui-btn-icon-right ui-btn-icon-notext ui-icon-right ui-btn-a" style="width: 4.5em;" onclick="OpenScheduleDialog(' + ScheduleConfig[i].cid + ',\'' + ScheduleConfig[i].Id + '\',\'' + ScheduleConfig[i].name + '\');"></a></li>');
            }

            $.mobile.changePage("index.html#schedulePage");

            $.mobile.loading("hide");
            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
        };

        function menubtn_Click(el) {

            var iType = el.id.substring(2);
            $.mobile.loading("show", {
                text: 'Wait..',
                textVisible: true,
                theme: 'a',
                html: ""
            });

            $('body').append("<div id='loaddiv' class='ui-loader-background'> </div>");

            document.getElementById("lblPageHeader_" + iType).innerHTML = el.name;

            switch (iType) {
                case "1": //Light
                    $.mobile.changePage("index.html#lightPage");
                    ResetImageSrc(iType);
                    //activePage = "lightPage";
                    break;
                case "2": //Fan
                    $.mobile.changePage("index.html#fanPage");
                    setKnobHide(iType);
                    setKnobOffImgHide(iType);
                    //setKnobDisable('knobForDimmer');
                    //activePage = "fanPage";
                    break;
                case "3": //Dimmer                   
                    $.mobile.changePage("index.html#dimmerPage");
                    setKnobHide(iType);
                    setKnobOffImgHide(iType);
                    //activePage = "dimmerPage";
                    break;
                //                case "4": //AC                                                                       
                //                    //                    $.mobile.changePage("index.html#acPage");                                                                       
                //                    //                    ResetImageSrc(iType);                                                                       
                //                    //                    activePage = "acPage";                                                                       
                //                    break;                                                                       
                case "5": //Plug                    
                    $.mobile.changePage("index.html#plugPage");
                    ResetImageSrc(iType);
                    //activePage = "plugPage";
                    break;
                //                case "6": //Local Scene                                                                       
                //                    $.mobile.changePage("index.html#localScenePage");                                                                       
                //                    //activePage = "localScenePage";                                                                       
                //                    $("#sceneList_" + iType).html("");                                                                       
                //                    break;                                                                       
                case "7": //IR-AC                    
                    $.mobile.changePage("index.html#irACPage");
                    //activePage = "irACPage";
                    setIRPowerONOffStatus(iType, "off");
                    break;
            }

            clearLocationSelBox(iType);
            clearInterfaceSelBox(iType);

            $("#selLocation_" + iType).append("<option value='' style='font-size: 15px; padding: 6px;'>Select Location...</option>");

            var LocationDB = [];
            var uniquLDB = [];
            if (getInterfaceTypeName(parseInt(iType)) == "IR-AC") {
                LocationDB = GetIRLocationByInterfaceType(iType);
            }
            else {
                LocationDB = GetLocationByInterfaceType(iType);
            }

            for (var i = 0; i < LocationDB.length; i++) {
                if (uniquLDB.indexOf(LocationDB[i].locationType + "_" + LocationDB[i].locationNumber) === -1) {
                    $("#selLocation_" + iType).append("<option value='" + LocationDB[i].locationType + "_" + LocationDB[i].locationNumber + "' style='font-size: 15px; padding: 6px;'>" + getLocationTypeName(LocationDB[i].locationType) + " - " + LocationDB[i].locationNumber + "</option>");
                    uniquLDB.push(LocationDB[i].locationType + "_" + LocationDB[i].locationNumber);
                }
            }

            $("#selLocation_" + iType).val("").attr('selected', true).siblings('option').removeAttr('selected');
            $("#selLocation_" + iType).selectmenu("refresh", true);


            $.mobile.loading("hide");
            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
        };

        function BindInterfaceList(iType) {

            $.mobile.loading("show", {
                text: 'Wait..',
                textVisible: true,
                theme: 'a',
                html: ""
            });
            $('body').append("<div id='loaddiv' class='ui-loader-background'> </div>");

            ResetImageSrc(iType);
            setKnobHide(iType);
            setKnobOffImgHide(iType);
            clearInterfaceSelBox(iType);

            var lTypeNumVal = $("#selLocation_" + iType).val() == null ? "" : $("#selLocation_" + iType).val();
            var lTypeNumText = $("#selLocation_" + iType + " option:selected").text();

            if (lTypeNumVal != "") {
                var lTypeNumValArray = lTypeNumVal.split("_");
                $("#selInterface_" + iType).append("<option value='' style='font-size: 15px; padding: 6px;'>Select Appliances...</option>");
                if (lTypeNumValArray.length == 2) {
                    var uniqueIDB = [];
                    var InterfaceDB = [];
                    //if (getInterfaceTypeName(parseInt(iType)) == "IR-AC") {
                    if ($.mobile.activePage.is("#irACPage") && iType == "7") {
                        InterfaceDB = GetIRInterfaceByLocationAndInterfaceType(lTypeNumValArray[0], lTypeNumValArray[1], iType);
                        for (var i = 0; i < InterfaceDB.length; i++) {
                            //if (uniqueIDB.indexOf(InterfaceDB[i].interfaceType + "_" + InterfaceDB[i].interfaceNumber) === -1) {
                            if (uniqueIDB.indexOf(InterfaceDB[i].cid + "_" + InterfaceDB[i].interfaceType + "_" + InterfaceDB[i].interfaceNumber + "_" + InterfaceDB[i].interfaceSubType) === -1) {
                                $("#selInterface_" + iType).append("<option value='" + InterfaceDB[i].cid + "_" + InterfaceDB[i].Id + "_" + InterfaceDB[i].locationType + "_" + InterfaceDB[i].locationNumber + "_" + InterfaceDB[i].channelId + "_" + InterfaceDB[i].interfaceType + "_" + InterfaceDB[i].interfaceNumber + "_" + InterfaceDB[i].interfaceSubType + "' style='font-size: 15px; padding: 6px;'>" + getInterfaceTypeName(InterfaceDB[i].interfaceType) + "-" + getInterfaceSubTypeName(InterfaceDB[i].interfaceSubType) + "-" + InterfaceDB[i].interfaceNumber + "</option>");
                                uniqueIDB.push(InterfaceDB[i].cid + "_" + InterfaceDB[i].interfaceType + "_" + InterfaceDB[i].interfaceNumber + "_" + InterfaceDB[i].interfaceSubType);
                            }
                        }
                    }
                    else if ($.mobile.activePage.is("#dimmerPage") && iType == "3") {
                        InterfaceDB = GetInterfaceByLocationAndInterfaceType(lTypeNumValArray[0], lTypeNumValArray[1], iType);
                        for (var i = 0; i < InterfaceDB.length; i++) {
                            //if (uniqueIDB.indexOf(InterfaceDB[i].interfaceType + "_" + InterfaceDB[i].interfaceNumber) === -1) {
                            if (uniqueIDB.indexOf(InterfaceDB[i].cid + "_" + InterfaceDB[i].interfaceType + "_" + InterfaceDB[i].interfaceNumber + "_" + InterfaceDB[i].interfaceSubType) === -1) {
                                $("#selInterface_" + iType).append("<option value='" + InterfaceDB[i].cid + "_" + InterfaceDB[i].Id + "_" + InterfaceDB[i].locationType + "_" + InterfaceDB[i].locationNumber + "_" + InterfaceDB[i].channelId + "_" + InterfaceDB[i].interfaceType + "_" + InterfaceDB[i].interfaceNumber + "_" + InterfaceDB[i].interfaceSubType + "' style='font-size: 15px; padding: 6px;'>" + getInterfaceTypeName(InterfaceDB[i].interfaceType) + "-" + getInterfaceSubTypeName(InterfaceDB[i].interfaceSubType) + "-" + InterfaceDB[i].interfaceNumber + "</option>");
                                uniqueIDB.push(InterfaceDB[i].cid + "_" + InterfaceDB[i].interfaceType + "_" + InterfaceDB[i].interfaceNumber + "_" + InterfaceDB[i].interfaceSubType);
                            }
                        }
                    }
                    else {
                        InterfaceDB = GetInterfaceByLocationAndInterfaceType(lTypeNumValArray[0], lTypeNumValArray[1], iType);
                        for (var i = 0; i < InterfaceDB.length; i++) {
                            //if (uniqueIDB.indexOf(InterfaceDB[i].interfaceType + "_" + InterfaceDB[i].interfaceNumber) === -1) {
                            if (uniqueIDB.indexOf(InterfaceDB[i].cid + "_" + InterfaceDB[i].interfaceType + "_" + InterfaceDB[i].interfaceNumber + "_" + InterfaceDB[i].interfaceSubType) === -1) {
                                $("#selInterface_" + iType).append("<option value='" + InterfaceDB[i].cid + "_" + InterfaceDB[i].Id + "_" + InterfaceDB[i].busId + "_" + InterfaceDB[i].deviceId + "_" + InterfaceDB[i].channelId + "_" + InterfaceDB[i].interfaceType + "_" + InterfaceDB[i].interfaceNumber + "_" + InterfaceDB[i].interfaceSubType + "' style='font-size: 15px; padding: 6px;'>" + getInterfaceTypeName(InterfaceDB[i].interfaceType) + "-" + getInterfaceSubTypeName(InterfaceDB[i].interfaceSubType) + "-" + InterfaceDB[i].interfaceNumber + "</option>");
                                uniqueIDB.push(InterfaceDB[i].cid + "_" + InterfaceDB[i].interfaceType + "_" + InterfaceDB[i].interfaceNumber + "_" + InterfaceDB[i].interfaceSubType);
                            }
                        }
                    }
                    //                        for (var i = 0; i < InterfaceDB.length; i++) {
                    //                            //if (uniqueIDB.indexOf(InterfaceDB[i].interfaceType + "_" + InterfaceDB[i].interfaceNumber) === -1) {
                    //                            if (uniqueIDB.indexOf(InterfaceDB[i].interfaceType + "_" + InterfaceDB[i].interfaceNumber + "_" + InterfaceDB[i].interfaceSubType) === -1) {
                    //                                if (getInterfaceTypeName(parseInt(iType)) == "IR-AC") {
                    //                                    $("#selInterface_" + iType).append("<option value='" + InterfaceDB[i].Id + "_" + InterfaceDB[i].locationType + "_" + InterfaceDB[i].locationNumber + "_" + InterfaceDB[i].channelId + "_" + InterfaceDB[i].interfaceType + "_" + InterfaceDB[i].interfaceNumber + "_" + InterfaceDB[i].interfaceSubType + "' style='font-size: 15px; padding: 6px;'>" + getInterfaceTypeName(InterfaceDB[i].interfaceType) + " - " + getInterfaceSubTypeName(InterfaceDB[i].interfaceSubType) + "-" + InterfaceDB[i].interfaceNumber + "</option>");
                    //                                //$("#selInterface_" + iType).append("<option value='" + InterfaceDB[i].Id + "_" + InterfaceDB[i].busId + "_" + InterfaceDB[i].deviceId + "_" + InterfaceDB[i].channelId + "_" + InterfaceDB[i].interfaceType + "_" + InterfaceDB[i].interfaceNumber + "_" + InterfaceDB[i].interfaceSubType + "' style='font-size: 15px; padding: 6px;'>" + getInterfaceTypeName(InterfaceDB[i].interfaceType) + " - " + getInterfaceSubTypeName(InterfaceDB[i].interfaceSubType) + "-" + InterfaceDB[i].interfaceNumber + "</option>");
                    //                                }
                    //                                else {
                    //                                    $("#selInterface_" + iType).append("<option value='" + InterfaceDB[i].Id + "_" + InterfaceDB[i].busId + "_" + InterfaceDB[i].deviceId + "_" + InterfaceDB[i].channelId + "_" + InterfaceDB[i].interfaceType + "_" + InterfaceDB[i].interfaceNumber + "_" + InterfaceDB[i].interfaceSubType + "' style='font-size: 15px; padding: 6px;'>" + getInterfaceTypeName(InterfaceDB[i].interfaceType) + " - " + getInterfaceSubTypeName(InterfaceDB[i].interfaceSubType) + "-" + InterfaceDB[i].interfaceNumber + "</option>");
                    //                                }
                    //                                uniqueIDB.push(InterfaceDB[i].interfaceType + "_" + InterfaceDB[i].interfaceNumber + "_" + InterfaceDB[i].interfaceSubType);
                    //                            }
                    //                        }


                }
                $("#selInterface_" + iType).val("").attr('selected', true).siblings('option').removeAttr('selected');
                $("#selInterface_" + iType).selectmenu("refresh", true);
            }

            $.mobile.loading("hide");
            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }

        };

        function loadInterfaceDetails(iType, IsLoadingMaskShow) {

            if (IsLoadingMaskShow) {
                $.mobile.loading("show", {
                    text: 'Wait..',
                    textVisible: true,
                    theme: 'a',
                    html: ""
                });
                $('body').append("<div id='loaddiv' class='ui-loader-background'> </div>");
            }
            var lTypeNumVal = $("#selLocation_" + iType).val() == null ? "" : $("#selLocation_" + iType).val();
            var iTypeNumVal = $("#selInterface_" + iType).val() == null ? "" : $("#selInterface_" + iType).val(); //$("#selInterface_" + iType).val();

            var lTypeNumValArray = lTypeNumVal.split("_");
            var iTypeNumIdValArray = iTypeNumVal.split("_");
            //var autoLoadInstID = iTypeNumVal + "_" + iType;
            if (lTypeNumValArray.length == 2 && iTypeNumIdValArray.length == 8) {
                //iTypeNumIdValArray 0-id 1-busID 2-deviceId 3-channelId 4-interfaceType 5-interfaceNumber
                //var configInfo = GetUUIDConfigById(iTypeNumIdValArray[0]);
                var configInfo = ($.mobile.activePage.is("#irACPage") && iType == "7") ? GetUUIDConfigByInterfaceSubType(iTypeNumIdValArray[0], iTypeNumIdValArray[2], iTypeNumIdValArray[3], "5", iTypeNumIdValArray[6], iTypeNumIdValArray[7]) : GetUUIDConfigById(iTypeNumIdValArray[0], iTypeNumIdValArray[1]);
                if (configInfo.length > 0) {
                    var queryStr = "/info.html";
                    configInfo[0].readWrite = 0;
                    if (IsLoadingMaskShow)
                        uniqueAutoLoadingInfo = configInfo[0];
                    ALSReadAjaxRequest(GetHandlerByControllerID(configInfo[0].cid), queryStr, JSON.stringify(configInfo[0]), function (data) {
                        try {
                            var info = JSON.parse(data);
                            var val = info.value.trim();
                            if (val != "" && val != "-1") {
                                if ($.mobile.activePage.is("#fanPage") && iType == "2") {
                                    if (val == "0") {
                                        setKnobHide(iType);
                                        setKnobOffImgShow(iType);
                                        setFanDimmerStatusIcon(iType, "ui-icon-redBtn");
                                        SetAutoLoading(iType, configInfo[0], 3);
                                    }
                                    else {
                                        setKnobShow(iType);
                                        setKnobOffImgHide(iType);
                                        setFanDimmerStatusIcon(iType, "ui-icon-greenBtn");
                                        var knobConfigInfo = GetUUIDConfigById(iTypeNumIdValArray[0], parseInt(iTypeNumIdValArray[1]) + 2);

                                        if (knobConfigInfo.length > 0) {
                                            knobConfigInfo[0].readWrite = 0;
                                            ALSReadAjaxRequest(GetHandlerByControllerID(knobConfigInfo[0].cid), queryStr, JSON.stringify(knobConfigInfo[0]), function (data) {
                                                try {
                                                    var knobInfo = JSON.parse(data);
                                                    var val = knobInfo.value.trim();
                                                    setKnobIndicator(iType, parseInt(val) / 2);
                                                }
                                                catch (err) { }
                                                SetAutoLoading(iType, configInfo[0], 3);
                                            });
                                        }
                                        else {
                                            SetAutoLoading(iType, configInfo[0], 3);
                                        }
                                    }
                                }
                                else if ($.mobile.activePage.is("#dimmerPage") && iType == "3") {
                                    //                                        if (val == "0") {
                                    //                                            setKnobHide(iType);
                                    //                                            setKnobOffImgShow(iType);
                                    //                                            setFanDimmerStatusIcon(iType, "ui-icon-redBtn");
                                    //                                            SetAutoLoading(iType, configInfo[0], 3);
                                    //                                        }
                                    //                                        else {

                                    //SetAutoLoading(iType, configInfo[0], 3);
                                    var knobLightConfigInfo = GetUUIDConfigByInterfaceSubType(iTypeNumIdValArray[0], iTypeNumIdValArray[2], iTypeNumIdValArray[3], "1", iTypeNumIdValArray[6], iTypeNumIdValArray[7]); //GetUUIDConfigById(parseInt(iTypeNumIdValArray[0]) + 2);
                                    if (knobLightConfigInfo.length > 0) {
                                        knobLightConfigInfo[0].readWrite = 0;
                                        ALSReadAjaxRequest(GetHandlerByControllerID(knobLightConfigInfo[0].cid), queryStr, JSON.stringify(knobLightConfigInfo[0]), function (data) {
                                            try {
                                                var knobLightInfo = JSON.parse(data);
                                                var lightVal = knobLightInfo.value.trim();
                                                //var lightVal = "10";
                                                if (lightVal == "0") {
                                                    setKnobHide(iType);
                                                    setKnobOffImgShow(iType);
                                                    setFanDimmerStatusIcon(iType, "ui-icon-redBtn");
                                                }
                                                else {
                                                    setKnobShow(iType);
                                                    setKnobOffImgHide(iType);
                                                    setFanDimmerStatusIcon(iType, "ui-icon-greenBtn");
                                                }
                                                try {
                                                    //setKnobIndicator(iType, parseInt(val) / dimmermf); 
                                                    setKnobIndicator(iType, parseInt(val) / info.mf);
                                                } catch (err) { }
                                                // setKnobIndicator(iType, parseInt(val) / dimmermf);
                                            }
                                            catch (err) { }
                                            SetAutoLoading(iType, configInfo[0], 3);
                                        });
                                    }
                                    else {
                                        SetAutoLoading(iType, configInfo[0], 3);
                                    }
                                    //}

                                }
                                else if ($.mobile.activePage.is("#irACPage") && iType == "7") {
                                    var txtFlipVal = "off";
                                    if (val == "10")
                                        txtFlipVal = "on";
                                    else
                                        txtFlipVal = "off";

                                    setIRPowerONOffStatus(iType, txtFlipVal);

                                    //console.log(uniqueAutoLoadingInfo);
                                    //console.log(configInfo[0]);
                                    //&& uniqueAutoLoadingInfo.index == configInfo[0].index && uniqueAutoLoadingInfo.deviceType == configInfo[0].deviceType && uniqueAutoLoadingInfo.deviceId == configInfo[0].deviceId && uniqueAutoLoadingInfo.busId == configInfo[0].busId && uniqueAutoLoadingInfo.attribute == configInfo[0].attribute && uniqueAutoLoadingInfo.locationType == configInfo[0].locationType && uniqueAutoLoadingInfo.locationNumber == configInfo[0].locationNumber && uniqueAutoLoadingInfo.iterfaceType == configInfo[0].iterfaceType && uniqueAutoLoadingInfo.interfaceNumber == configInfo[0].interfaceNumber
                                    //if (uniqueAutoLoadingInfo.Id == configInfo[0].Id && $.active < 3) {
                                    //   window.clearTimeout(timer);
                                    SetAutoLoading(iType, configInfo[0], 3);
                                    //}

                                }
                                else {
                                    SetImageSrc(iType, val);

                                    //console.log(uniqueAutoLoadingInfo);
                                    //console.log(configInfo[0]);
                                    //&& uniqueAutoLoadingInfo.index == configInfo[0].index && uniqueAutoLoadingInfo.deviceType == configInfo[0].deviceType && uniqueAutoLoadingInfo.deviceId == configInfo[0].deviceId && uniqueAutoLoadingInfo.busId == configInfo[0].busId && uniqueAutoLoadingInfo.attribute == configInfo[0].attribute && uniqueAutoLoadingInfo.locationType == configInfo[0].locationType && uniqueAutoLoadingInfo.locationNumber == configInfo[0].locationNumber && uniqueAutoLoadingInfo.iterfaceType == configInfo[0].iterfaceType && uniqueAutoLoadingInfo.interfaceNumber == configInfo[0].interfaceNumber
                                    //if (uniqueAutoLoadingInfo.Id == configInfo[0].Id && $.active < 3) {
                                    //   window.clearTimeout(timer);
                                    SetAutoLoading(iType, configInfo[0], 3);
                                    //}
                                }
                            }
                        } catch (err) {
                            if (IsLoadingMaskShow) {
                                ResetImageSrc(iType);
                                setKnobOffImgHide(iType);
                                setKnobHide(iType);
                                setFanDimmerStatusIcon(iType, "ui-icon-info");
                            }

                            //console.log(uniqueAutoLoadingInfo);
                            //console.log(configInfo[0]);
                            //&& uniqueAutoLoadingInfo.index == configInfo[0].index && uniqueAutoLoadingInfo.deviceType == configInfo[0].deviceType && uniqueAutoLoadingInfo.deviceId == configInfo[0].deviceId && uniqueAutoLoadingInfo.busId == configInfo[0].busId && uniqueAutoLoadingInfo.attribute == configInfo[0].attribute && uniqueAutoLoadingInfo.locationType == configInfo[0].locationType && uniqueAutoLoadingInfo.locationNumber == configInfo[0].locationNumber && uniqueAutoLoadingInfo.iterfaceType == configInfo[0].iterfaceType && uniqueAutoLoadingInfo.interfaceNumber == configInfo[0].interfaceNumber
                            //if (uniqueAutoLoadingInfo.Id == configInfo[0].Id && $.active < 3) {
                            //    window.clearTimeout(timer);
                            SetAutoLoading(iType, configInfo[0], 3);
                            //}
                        }
                        if (IsLoadingMaskShow) {
                            $.mobile.loading("hide");
                            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                        }

                        //                        console.log(uniqueAutoLoadingInfo);
                        //                        console.log(configInfo[0]);
                        //                        //&& uniqueAutoLoadingInfo.index == configInfo[0].index && uniqueAutoLoadingInfo.deviceType == configInfo[0].deviceType && uniqueAutoLoadingInfo.deviceId == configInfo[0].deviceId && uniqueAutoLoadingInfo.busId == configInfo[0].busId && uniqueAutoLoadingInfo.attribute == configInfo[0].attribute && uniqueAutoLoadingInfo.locationType == configInfo[0].locationType && uniqueAutoLoadingInfo.locationNumber == configInfo[0].locationNumber && uniqueAutoLoadingInfo.iterfaceType == configInfo[0].iterfaceType && uniqueAutoLoadingInfo.interfaceNumber == configInfo[0].interfaceNumber
                        //                        if (uniqueAutoLoadingInfo.Id == configInfo[0].Id && $.active < 2) {
                        //                            window.clearTimeout(timer);
                        //                            SetAutoLoading(iType);
                        //                        }
                    });
                }
                else {
                    window.clearTimeout(timer);
                    ResetImageSrc(iType);
                    setKnobOffImgHide(iType);
                    setKnobHide(iType);
                    setFanDimmerStatusIcon(iType, "ui-icon-info");
                    if (IsLoadingMaskShow) {
                        //setTimeout(function () {
                        $.mobile.loading("hide");
                        try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                        //}, delay);
                    }
                }
            }
            else {
                window.clearTimeout(timer);
                ResetImageSrc(iType);
                setKnobOffImgHide(iType);
                setKnobHide(iType);
                setFanDimmerStatusIcon(iType, "ui-icon-info");
                if (IsLoadingMaskShow) {
                    //setTimeout(function () {
                    $.mobile.loading("hide");
                    try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                    //}, delay);
                }
            }

        };

        function BindLSceneList(iType, IsLoadingMaskShow) {
            if (IsLoadingMaskShow) {
                $.mobile.loading("show", {
                    text: 'Wait..',
                    textVisible: true,
                    theme: 'a',
                    html: ""
                });
                $('body').append("<div id='loaddiv' class='ui-loader-background'> </div>");
            }
            var lTypeNumVal = $("#selLocation_" + iType).val() == null ? "" : $("#selLocation_" + iType).val();
            var lTypeNumValArray = lTypeNumVal.split("_");

            $("#sceneList_" + iType).html("");
            $("#sceneList_" + iType).append('<li class="ui-li-has-alt ui-first-child ui-last-child"><a href="#" class="ui-btn tap" style="margin-right: 4.5em;"><h1>Scene' + 1 + '</h1></a><a href="#" id="scenes__' + 1 + '" class="ui-btn ui-icon-green ui-nodisc-icon ui-btn-icon-right ui-btn-icon-notext ui-icon-right ui-btn-a" style="width: 4.5em;" onclick="alert("sceneWrite");"></a></li>');
            $("#sceneList_" + iType).append('<li class="ui-li-has-alt ui-first-child ui-last-child"><a href="#" class="ui-btn tap" style="margin-right: 4.5em;"><h1>Scene' + 2 + '</h1></a><a href="#" id="scenes__' + 2 + '" class="ui-btn ui-icon-red ui-nodisc-icon ui-btn-icon-right ui-btn-icon-notext ui-icon-right ui-btn-a" style="width: 4.5em;" onclick="alert("sceneWrite");"></a></li>');
            $("#sceneList_" + iType).append('<li class="ui-li-has-alt ui-first-child ui-last-child"><a href="#" class="ui-btn tap" style="margin-right: 4.5em;"><h1>Scene' + 3 + '</h1></a><a href="#" id="scenes__' + 3 + '" class="ui-btn ui-icon-red ui-nodisc-icon ui-btn-icon-right ui-btn-icon-notext ui-icon-right ui-btn-a" style="width: 4.5em;" onclick="alert("sceneWrite");"></a></li>');

            if (IsLoadingMaskShow) {
                $.mobile.loading("hide");
                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
            }
        };



        function writeOn(iType) {
            $.mobile.loading("show", {
                text: 'Wait..',
                textVisible: true,
                theme: 'a',
                html: ""
            });
            $('body').append("<div id='loaddiv' class='ui-loader-background'></div>");

            var lTypeNumVal = $("#selLocation_" + iType).val() == null ? "" : $("#selLocation_" + iType).val();
            var iTypeNumVal = $("#selInterface_" + iType).val() == null ? "" : $("#selInterface_" + iType).val(); //$("#selInterface_" + iType).val();

            var lTypeNumValArray = lTypeNumVal.split("_");
            var iTypeNumIdValArray = iTypeNumVal.split("_");
            var OnOffIndexOf = $('#img_' + iType).length > 0 ? $('#img_' + iType).attr('src').indexOf("ON") : -99;
            if (OnOffIndexOf == -99)
                OnOffIndexOf = $("#knopParentDiv_" + iType).css('display') == "none" ? -1 : 1;

            //if ($('#img_' + iType).attr('src').indexOf("ON") == -1 && lTypeNumValArray.length == 2 && iTypeNumIdValArray.length == 6) {
            if (OnOffIndexOf == -1 && lTypeNumValArray.length == 2 && iTypeNumIdValArray.length == 8) {
                //iTypeNumIdValArray 0-id 1-busID 2-deviceId 3-channelId 4-interfaceType 5-interfaceNumber
                //                var pcwrtInfo = GetPCWRTInfo(iTypeNumIdValArray[1], iTypeNumIdValArray[2], iTypeNumIdValArray[3]);
                //                if (pcwrtInfo.length > 0) {
                //                    var queryStr = "/info.html";
                //                    pcwrtInfo[0].readWrite = 1;
                //                    pcwrtInfo[0].value = "1";

                //                    ALSWriteAjaxRequest(queryStr, JSON.stringify(pcwrtInfo[0]), function (data) {

                //                        setTimeout(function () {
                //                            $.mobile.loading("hide");
                //                            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                //                        }, delay);
                //                    });
                //                }
                var outInfo = ($.mobile.activePage.is("#dimmerPage") && iType == "3") ? GetUUIDConfigByInterfaceSubType(iTypeNumIdValArray[0], iTypeNumIdValArray[2], iTypeNumIdValArray[3], "1", iTypeNumIdValArray[6], iTypeNumIdValArray[7]) : GetUUIDConfigById(iTypeNumIdValArray[0], iTypeNumIdValArray[1]); //GetPCWRTInfo(iTypeNumIdValArray[1], iTypeNumIdValArray[2], iTypeNumIdValArray[3]);
                if (outInfo.length > 0) {
                    var queryStr = "/info.html";
                    outInfo[0].readWrite = 1;
                    outInfo[0].value = "10";

                    ALSWriteAjaxRequest(GetHandlerByControllerID(outInfo[0].cid), queryStr, JSON.stringify(outInfo[0]), function (data) {

                        setTimeout(function () {
                            $.mobile.loading("hide");
                            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                        }, delay);
                    });
                }
                else {
                    $.mobile.loading("hide");
                    try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                }
            }
            else {
                $.mobile.loading("hide");
                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
            }

        };
        function writeOff(iType) {
            $.mobile.loading("show", {
                text: 'Wait..',
                textVisible: true,
                theme: 'a',
                html: ""
            });
            $('body').append("<div id='loaddiv' class='ui-loader-background'></div>");

            var lTypeNumVal = $("#selLocation_" + iType).val() == null ? "" : $("#selLocation_" + iType).val();
            var iTypeNumVal = $("#selInterface_" + iType).val() == null ? "" : $("#selInterface_" + iType).val();

            var lTypeNumValArray = lTypeNumVal.split("_");
            var iTypeNumIdValArray = iTypeNumVal.split("_");

            var OnOffIndexOf = $('#img_' + iType).length > 0 ? $('#img_' + iType).attr('src').indexOf("OFF") : -99;
            if (OnOffIndexOf == -99)
                OnOffIndexOf = $("#knopParentDiv_" + iType).css('display') != "none" ? -1 : 1;

            if (OnOffIndexOf == -1 && lTypeNumValArray.length == 2 && iTypeNumIdValArray.length == 8) {
                //iTypeNumIdValArray 0-id 1-busID 2-deviceId 3-channelId 4-interfaceType 5-interfaceNumber
                //                var pcwrtInfo = GetPCWRTInfo(iTypeNumIdValArray[1], iTypeNumIdValArray[2], iTypeNumIdValArray[3]);
                //                if (pcwrtInfo.length > 0) {
                //                    var queryStr = "/info.html";
                //                    pcwrtInfo[0].readWrite = 1;
                //                    pcwrtInfo[0].value = "1";
                //                    ALSWriteAjaxRequest(queryStr, JSON.stringify(pcwrtInfo[0]), function (data) {
                //                        setTimeout(function () {
                //                            $.mobile.loading("hide");
                //                            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                //                        }, delay);
                //                    });
                //                }
                var outInfo = ($.mobile.activePage.is("#dimmerPage") && iType == "3") ? GetUUIDConfigByInterfaceSubType(iTypeNumIdValArray[0], iTypeNumIdValArray[2], iTypeNumIdValArray[3], "1", iTypeNumIdValArray[6], iTypeNumIdValArray[7]) : GetUUIDConfigById(iTypeNumIdValArray[0], iTypeNumIdValArray[1]); // pcwrtInfo = GetPCWRTInfo(iTypeNumIdValArray[1], iTypeNumIdValArray[2], iTypeNumIdValArray[3]);
                if (outInfo.length > 0) {
                    var queryStr = "/info.html";
                    outInfo[0].readWrite = 1;
                    outInfo[0].value = "0";
                    ALSWriteAjaxRequest(GetHandlerByControllerID(outInfo[0].cid), queryStr, JSON.stringify(outInfo[0]), function (data) {
                        setTimeout(function () {
                            $.mobile.loading("hide");
                            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                        }, delay);
                    });
                }
                else {
                    $.mobile.loading("hide");
                    try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                }
            }
            else {
                $.mobile.loading("hide");
                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
            }
        };


        function writeUsingKnob(val, iType) {

            var lTypeNumVal = $("#selLocation_" + iType).val() == null ? "" : $("#selLocation_" + iType).val();
            var iTypeNumVal = $("#selInterface_" + iType).val() == null ? "" : $("#selInterface_" + iType).val(); //$("#selInterface_" + iType).val();

            var lTypeNumValArray = lTypeNumVal.split("_");
            var iTypeNumIdValArray = iTypeNumVal.split("_");

            var OnOffIndexOf = $("#knopParentDiv_" + iType).css('display') != "none" ? -1 : 1;

            //if ($('#img_' + iType).attr('src').indexOf("ON") == -1 && lTypeNumValArray.length == 2 && iTypeNumIdValArray.length == 6) {
            if (OnOffIndexOf == -1 && lTypeNumValArray.length == 2 && iTypeNumIdValArray.length == 8) {
                //iTypeNumIdValArray 0-id 1-busID 2-deviceId 3-channelId 4-interfaceType 5-interfaceNumber                
                var outInfo = GetUUIDConfigById(iTypeNumIdValArray[0], parseInt(iTypeNumIdValArray[1]) + 2); //GetPCWRTInfo(iTypeNumIdValArray[1], iTypeNumIdValArray[2], iTypeNumIdValArray[3]);
                if (outInfo.length > 0) {
                    var queryStr = "/info.html";
                    outInfo[0].readWrite = 1;
                    outInfo[0].value = val.toString();

                    ALSWriteAjaxRequest(GetHandlerByControllerID(outInfo[0].cid), queryStr, JSON.stringify(outInfo[0]), function (data) {

                    });
                }
                else {

                }
            }
            else {

            }

        };

        function writeUsingKnobForDimmer(oldVal, newVal, iType) {

            $.mobile.loading("show", {
                text: 'In Progress. Please Wait.',
                textVisible: true,
                theme: 'a',
                html: ""
            });
            $('body').append("<div id='loaddiv' class='ui-loader-background'></div>");

            var lTypeNumVal = $("#selLocation_" + iType).val() == null ? "" : $("#selLocation_" + iType).val();
            var iTypeNumVal = $("#selInterface_" + iType).val() == null ? "" : $("#selInterface_" + iType).val(); //$("#selInterface_" + iType).val();

            var lTypeNumValArray = lTypeNumVal.split("_");
            var iTypeNumIdValArray = iTypeNumVal.split("_");

            var OnOffIndexOf = $("#knopParentDiv_" + iType).css('display') != "none" ? -1 : 1;

            //if ($('#img_' + iType).attr('src').indexOf("ON") == -1 && lTypeNumValArray.length == 2 && iTypeNumIdValArray.length == 6) {
            if (OnOffIndexOf == -1 && lTypeNumValArray.length == 2 && iTypeNumIdValArray.length == 8) {
                //iTypeNumIdValArray 0-id 1-busID 2-deviceId 3-channelId 4-interfaceType 5-interfaceNumber
                var outInfo = GetUUIDConfigById(iTypeNumIdValArray[0], iTypeNumIdValArray[1]); //GetUUIDConfigByInterfaceSubType(iTypeNumIdValArray[1], iTypeNumIdValArray[2], "1", iTypeNumIdValArray[5], iTypeNumIdValArray[6]); //  GetUUIDConfigById(parseInt(iTypeNumIdValArray[0]) + 2); //GetPCWRTInfo(iTypeNumIdValArray[1], iTypeNumIdValArray[2], iTypeNumIdValArray[3]);
                if (outInfo.length > 0) {
                    var queryStr = "/info.html";
                    outInfo[0].readWrite = 1;
                    outInfo[0].value = newVal.toString(); //oldVal;
                    //                    var IncrDecrVal = oldVal < newVal ? 5 : -5;
                    //                    var cnt = 0;


                    try {

                        //                        writeDimmerUpDownRequestOneByOne(queryStr, outInfo[0], oldVal, newVal, IncrDecrVal, cnt, function (data) {
                        //                            $.mobile.loading("hide");
                        //                            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                        //                            //console.log("Done");
                        //                        });
                        ALSWriteAjaxRequest(GetHandlerByControllerID(outInfo[0].cid), queryStr, JSON.stringify(outInfo[0]), function (data) {
                            //                            $.mobile.loading("hide");
                            //                            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                            setTimeout(function () {
                                $.mobile.loading("hide");
                                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                            }, 100);
                        });
                    }
                    catch (err) {
                        $.mobile.loading("hide");
                        try { var elmask = document.getelementbyid('loaddiv'); elmask.parentnode.removechild(elmask); } catch (msg) { }
                    }
                }
                else {
                    $.mobile.loading("hide");
                    try { var elmask = document.getelementbyid('loaddiv'); elmask.parentnode.removechild(elmask); } catch (msg) { }
                }
            }
            else {
                $.mobile.loading("hide");
                try { var elmask = document.getelementbyid('loaddiv'); elmask.parentnode.removechild(elmask); } catch (msg) { }
            }

        };

        //        function writeDimmerUpDownRequestOneByOne(queryStr, info, currVal, newVal, incDecr, cnt, callback) {
        //            try {

        //                info.value = ((currVal + incDecr) * dimmermf).toString();
        //                ALSWriteAjaxRequest(queryStr, JSON.stringify(info), function (data) {

        //                    console.log("Request Count : " + cnt.toString());
        //                    console.log("New : " + newVal.toString());
        //                    console.log("Current : " + currVal.toString());

        //                    var currInfo = JSON.parse(data);
        //                    if (currInfo.length > 0) {
        //                        var val = currInfo.value.trim();
        //                        currVal = (parseInt(val) / dimmermf);
        //                        cnt = cnt + 1;
        //                        if (currVal != newVal) {
        //                            if (currVal > 0 && currVal < 100 && cnt <= 20) {
        //                                setTimeout(function () {
        //                                    writeDimmerUpDownRequestOneByOne(queryStr, currInfo, currVal, newVal, incDecr, cnt, function (data) {
        //                                        callback("true");
        //                                    });

        //                                }, 10);
        //                            }

        //                        } else {
        //                            callback("true");
        //                        }
        //                    }
        //                    else {
        //                        writeDimmerUpDownRequestOneByOne(queryStr, info, currVal, newVal, incDecr, cnt, function (data) {
        //                            callback("true");
        //                        });
        //                    }

        //                });
        //            }
        //            catch (err) {
        //                writeDimmerUpDownRequestOneByOne(queryStr, info, currVal, newVal, incDecr, cnt, function (data) {
        //                    callback("true");
        //                });
        //                callback("false");
        //            }
        //        };

        function WriteGlobalScene(cid, globalSceneFileID) {
            $.mobile.loading("show", {
                text: 'Wait..',
                textVisible: true,
                theme: 'a',
                html: ""
            });
            $('body').append("<div id='loaddiv' class='ui-loader-background'></div>");

            if (globalSceneFileID != "" && globalSceneFileID != "-1") {
                var queryStr = "/global.html?scene=" + globalSceneFileID;
                SetGlobalScene(GetHandlerByControllerID(cid), queryStr, function (data) {
                    try {
                    }
                    catch (err) {
                    }
                    $.mobile.loading("hide");
                    try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                });
            }
            else {
                $.mobile.loading("hide");
                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
            }

        };

        function WriteIRFlipOnOff(iType) {
            //console.log($("#flipOnOff_" + iType).val());
            $.mobile.loading("show", {
                text: 'Wait..',
                textVisible: true,
                theme: 'a',
                html: ""
            });
            $('body').append("<div id='loaddiv' class='ui-loader-background'></div>");

            var lTypeNumVal = $("#selLocation_" + iType).val() == null ? "" : $("#selLocation_" + iType).val();
            var iTypeNumVal = $("#selInterface_" + iType).val() == null ? "" : $("#selInterface_" + iType).val(); //$("#selInterface_" + iType).val();

            var lTypeNumValArray = lTypeNumVal.split("_");
            var iTypeNumIdValArray = iTypeNumVal.split("_");

            if (lTypeNumValArray.length == 2 && iTypeNumIdValArray.length == 8) {
                var outInfo = GetUUIDConfigByInterfaceSubType(iTypeNumIdValArray[0], iTypeNumIdValArray[2], iTypeNumIdValArray[3], "5", iTypeNumIdValArray[6], iTypeNumIdValArray[7]); //GetUUIDConfigById(iTypeNumIdValArray[0]); 
                if (outInfo.length > 0) {
                    var queryStr = "/info.html";
                    outInfo[0].readWrite = 1;
                    if ($("#flipOnOff_" + iType).val() == "on")
                        outInfo[0].value = "10";
                    else
                        outInfo[0].value = "0";

                    ALSWriteAjaxRequest(GetHandlerByControllerID(outInfo[0].cid), queryStr, JSON.stringify(outInfo[0]), function (data) {

                        setTimeout(function () {
                            $.mobile.loading("hide");
                            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                        }, delay);
                    });
                }
                else {
                    setIRPowerONOffStatus(iType, "off");
                    $.mobile.loading("hide");
                    try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                }
            }
            else {
                setIRPowerONOffStatus(iType, "off");
                $.mobile.loading("hide");
                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
            }
        };

        //        function writeDimmerOn(iType) {
        //            $.mobile.loading("show", {
        //                text: 'Wait..',
        //                textVisible: true,
        //                theme: 'a',
        //                html: ""
        //            });
        //            $('body').append("<div id='loaddiv' class='ui-loader-background'></div>");

        //            var lTypeNumVal = $("#selLocation_" + iType).val() == null ? "" : $("#selLocation_" + iType).val(); 
        //            var iTypeNumVal = $("#selInterface_" + iType).val() == null ? "" : $("#selInterface_" + iType).val(); //$("#selInterface_" + iType).val();

        //            var lTypeNumValArray = lTypeNumVal.split("_");
        //            var iTypeNumIdValArray = iTypeNumVal.split("_");

        //            if (lTypeNumValArray.length == 2 && iTypeNumIdValArray.length == 6) {

        //                //iTypeNumIdValArray 0-id 1-busID 2-deviceId 3-channelId 4-interfaceType 5-interfaceNumber
        //                var pcwrtInfo = GetPCWRTInfo(iTypeNumIdValArray[1], iTypeNumIdValArray[2], iTypeNumIdValArray[3]);
        //                if (pcwrtInfo.length > 0) {
        //                    var queryStr = "/info.html";
        //                    pcwrtInfo[0].readWrite = 1;
        //                    pcwrtInfo[0].value = "1";

        //                    ALSWriteAjaxRequest(queryStr, JSON.stringify(pcwrtInfo[0]), function (data) {

        //                        setTimeout(function () {
        //                            $.mobile.loading("hide");
        //                            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
        //                        }, delay);
        //                    });
        //                }
        //                else {
        //                    $.mobile.loading("hide");
        //                    try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
        //                }
        //            }
        //            else {
        //                $.mobile.loading("hide");
        //                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
        //            }

        //        };
        //        function writeDimmerOff(iType) {
        //            $.mobile.loading("show", {
        //                text: 'Wait..',
        //                textVisible: true,
        //                theme: 'a',
        //                html: ""
        //            });
        //            $('body').append("<div id='loaddiv' class='ui-loader-background'></div>");

        //            var lTypeNumVal =$("#selLocation_" + iType).val() == null ? "" : $("#selLocation_" + iType).val(); 
        //            var iTypeNumVal = $("#selInterface_" + iType).val() == null ? "" : $("#selInterface_" + iType).val();

        //            var lTypeNumValArray = lTypeNumVal.split("_");
        //            var iTypeNumIdValArray = iTypeNumVal.split("_");

        //            if (lTypeNumValArray.length == 2 && iTypeNumIdValArray.length == 6) {
        //                //iTypeNumIdValArray 0-id 1-busID 2-deviceId 3-channelId 4-interfaceType 5-interfaceNumber
        //                var pcwrtInfo = GetPCWRTInfo(iTypeNumIdValArray[1], iTypeNumIdValArray[2], iTypeNumIdValArray[3]);
        //                if (pcwrtInfo.length > 0) {
        //                    var queryStr = "/info.html";
        //                    pcwrtInfo[0].readWrite = 1;
        //                    pcwrtInfo[0].value = "1";
        //                    ALSWriteAjaxRequest(queryStr, JSON.stringify(pcwrtInfo[0]), function (data) {
        //                        setTimeout(function () {
        //                            $.mobile.loading("hide");
        //                            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
        //                        }, delay);
        //                    });
        //                }
        //                else {
        //                    $.mobile.loading("hide");
        //                    try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
        //                }
        //            }
        //            else {
        //                $.mobile.loading("hide");
        //                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
        //            }
        //        };

        function WriteNotificationUpdate(el) {
            $.mobile.loading("show", {
                text: 'Wait..',
                textVisible: true,
                theme: 'a',
                html: ""
            });
            $('body').append("<div id='loaddiv' class='ui-loader-background'></div>");

            var notifyInfo = [];
            var GSceneVal = $("#NotifyGSceneList").val();
            //            if (isNaN(GSceneVal))
            //                GSceneVal = GSceneVal.split("_")[1];
            var cmdVal = parseInt(GSceneVal) >= 10 ? GSceneVal : '0' + GSceneVal;
            var selVal = $("#NotifyEnableDisable").val() + $('input[name=notifyBy]:checked').val() + $('input[name=notifyOn]:checked').val() + cmdVal;
            notifyInfo.push(JSON.parse(el.name));
            if (notifyInfo.length > 0 && notifyInfo[0].value != selVal) {
                var queryStr = "/notify.html";
                notifyInfo[0].readWrite = 1;
                notifyInfo[0].value = selVal; //Must be 5 digit number string.
                ALSWriteAjaxRequest(GetHandlerByControllerID(notifyInfo[0].cid), queryStr, JSON.stringify(notifyInfo[0]), function (data) {

                    //                    var saveConfigInfo = GetSaveConfigInfo(modeInfo[0].busId, modeInfo[0].deviceId);
                    //                    if (saveConfigInfo.length > 0) {
                    //                        saveConfigInfo[0].readWrite = 1;
                    //                        saveConfigInfo[0].value = "1";
                    //                        ALSWriteAjaxRequest(queryStr, JSON.stringify(saveConfigInfo[0]), function (data) {

                    setTimeout(function () {
                        $.mobile.loading("hide");
                        try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                        $.mobile.back();
                    }, delay);
                    //                        });
                    //                    }
                    //                    else {
                    //                        $.mobile.loading("hide");
                    //                        try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                    //                    }
                });
            }
            else {

                $.mobile.loading("hide");
                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                $.mobile.back();
            }
        };

        function WriteScheduleUpdate(el) {
            $.mobile.loading("show", {
                text: 'Wait..',
                textVisible: true,
                theme: 'a',
                html: ""
            });
            $('body').append("<div id='loaddiv' class='ui-loader-background'></div>");

            var scheduleInfo = [];
            //var cmdVal = $("#NotifyGSceneList").val();
            //var selVal = $("#ScheduleEnableDisable").val() + $('input[name=notifyBy]:checked').val() + $('input[name=notifyOn]:checked').val() + cmdVal;
            scheduleInfo.push(JSON.parse(el.name));
            if (scheduleInfo.length > 0 && $("#mySchedulefrm").valid()) {
                var queryStr = "/schedule.html";
                scheduleInfo[0].readWrite = 1;
                scheduleInfo[0].isEnable = parseInt($("#ScheduleEnableDisable").val());
                scheduleInfo[0].hour = parseInt($("#scheduleTime").val().substring(0, 2)); // info.hour;
                scheduleInfo[0].mins = parseInt($("#scheduleTime").val().substring(3, 5)); // info.mins;
                var GSceneVal = $("#ScheduleGSceneList").val();
                //                if (isNaN(GSceneVal))
                //                    GSceneVal = GSceneVal.split("_")[1];
                scheduleInfo[0].globalScene = parseInt(GSceneVal); //info.globalScene;
                var daysInDigit = 128;

                if ($("#chkSat").prop("checked"))
                    daysInDigit = daysInDigit + 64;
                if ($("#chkFri").prop("checked"))
                    daysInDigit = daysInDigit + 32;
                if ($("#chkThu").prop("checked"))
                    daysInDigit = daysInDigit + 16;
                if ($("#chkWed").prop("checked"))
                    daysInDigit = daysInDigit + 8;
                if ($("#chkTue").prop("checked"))
                    daysInDigit = daysInDigit + 4;
                if ($("#chkMon").prop("checked"))
                    daysInDigit = daysInDigit + 2;
                if ($("#chkSun").prop("checked"))
                    daysInDigit = daysInDigit + 1;
                if (daysInDigit <= 255 || daysInDigit >= 0) {
                    scheduleInfo[0].days = daysInDigit;

                    ALSWriteAjaxRequest(GetHandlerByControllerID(scheduleInfo[0].cid), queryStr, JSON.stringify(scheduleInfo[0]), function (data) {
                        setTimeout(function () {
                            $.mobile.loading("hide");
                            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                            $.mobile.back();
                        }, delay);
                    });
                }
                else {

                    $.mobile.loading("hide");
                    try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }

                }
            }
            else {

                $.mobile.loading("hide");
                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                // $.mobile.back();
            }
        };

        function writeSimpleMode(el) {

            $.mobile.loading("show", {
                text: 'Wait..',
                textVisible: true,
                theme: 'a',
                html: ""
            });
            $('body').append("<div id='loaddiv' class='ui-loader-background'></div>");


            ////iTypeNumIdValArray 0-id 1-busID 2-deviceId 3-channelId 4-interfaceType 5-interfaceNumber
            var modeInfo = [];
            var selModeVal = $("#SelSimpleMode").val();
            modeInfo.push(JSON.parse(el.name));
            if (modeInfo.length > 0 && modeInfo[0].value != selModeVal) {
                var queryStr = "/info.html";
                modeInfo[0].readWrite = 1;
                modeInfo[0].value = selModeVal;
                ALSWriteAjaxRequest(GetHandlerByControllerID(modeInfo[0].cid), queryStr, JSON.stringify(modeInfo[0]), function (data) {

                    var saveConfigInfo = GetSaveConfigInfo(modeInfo[0].cid, modeInfo[0].busId, modeInfo[0].deviceId);
                    if (saveConfigInfo.length > 0) {
                        saveConfigInfo[0].readWrite = 1;
                        saveConfigInfo[0].value = "1";
                        ALSWriteAjaxRequest(GetHandlerByControllerID(saveConfigInfo[0].cid), queryStr, JSON.stringify(saveConfigInfo[0]), function (data) {

                            setTimeout(function () {
                                $.mobile.loading("hide");
                                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                                $.mobile.back();
                            }, delay);
                        });
                    }
                    else {
                        $.mobile.loading("hide");
                        try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                        $.mobile.back();
                    }
                });
            }
            else {
                $.mobile.loading("hide");
                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                $.mobile.back();
            }
        };

        function WriteIRCommand(paramType, iType, IsIRTempUpDownPress, IsIRTempUpPress) {

            $.mobile.loading("show", {
                text: 'Wait..',
                textVisible: true,
                theme: 'a',
                html: ""
            });
            $('body').append("<div id='loaddiv' class='ui-loader-background'></div>");

            var iTypeNumVal = $("#selInterface_" + iType).val() == null ? "" : $("#selInterface_" + iType).val(); //$("#selInterface_" + iType).val();
            var isOn = $("#flipOnOff_" + iType).val();  //== "on"? //if ($("#flipOnOff_" + iType).val() == "on")
            if (iTypeNumVal != "" && isOn == "on") {
                var iTypeNumIdValArray = iTypeNumVal.split("_");
                if (iTypeNumIdValArray.length == 8) {
                    var val = 0;
                    var queryStr = "/info.html";
                    if (IsIRTempUpDownPress) {
                        val = parseInt($("#lblIRTemp_" + iType).text());
                        if (val > 16 && val < 32) {
                            var tempUpDownPType = IsIRTempUpPress ? val + 1 : val - 1;
                            var irCmdInfo = GetIRCommand(iTypeNumIdValArray[0], iTypeNumIdValArray[2], iTypeNumIdValArray[3], iTypeNumIdValArray[5], iTypeNumIdValArray[6], tempUpDownPType); //GetIRCommand(iTypeNumIdValArray[1], iTypeNumIdValArray[2], iTypeNumIdValArray[4], iTypeNumIdValArray[5], paramType);
                            if (irCmdInfo.length > 0) {
                                irCmdInfo[0].readWrite = 1;
                                ALSWriteAjaxRequest(GetHandlerByControllerID(irCmdInfo[0].cid), queryStr, JSON.stringify(irCmdInfo[0]), function (data) {
                                    setTimeout(function () {
                                        if (IsIRTempUpPress)
                                            val++;
                                        else
                                            val--;
                                        $("#lblIRTemp_" + iType).text(val);
                                        $.mobile.loading("hide");
                                        try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                                    }, delay);
                                });
                            }
                            else {
                                $.mobile.loading("hide");
                                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                            }
                        }
                        else {
                            $.mobile.loading("hide");
                            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                        }
                    }
                    else {
                        var irCmdInfo = GetIRCommand(iTypeNumIdValArray[0], iTypeNumIdValArray[2], iTypeNumIdValArray[3], iTypeNumIdValArray[5], iTypeNumIdValArray[6], paramType);
                        if (irCmdInfo.length > 0) {
                            irCmdInfo[0].readWrite = 1;
                            ALSWriteAjaxRequest(GetHandlerByControllerID(irCmdInfo[0].cid), queryStr, JSON.stringify(irCmdInfo[0]), function (data) {
                                setTimeout(function () {
                                    $.mobile.loading("hide");
                                    try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                                }, delay);
                            });
                        }
                        else {
                            $.mobile.loading("hide");
                            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                        }
                    }
                }
                else {
                    $.mobile.loading("hide");
                    try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                }
            }
            else {
                $.mobile.loading("hide");
                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
            }
        };

        function OpenNotificationDialog(cid, notifyID, notifyName, strLocation, strInterface) {

            $.mobile.loading("show", {
                text: 'Wait..',
                textVisible: true,
                theme: 'a',
                html: ""
            });

            $('body').append("<div id='loaddiv' class='ui-loader-background'> </div>");

            if (notifyID != "" && notifyID != "-1") {
                var queryStr = "/notify.html";
                var notifyInfo = GetNotifyConfigById(cid, notifyID);
                if (notifyInfo.length > 0) {
                    notifyInfo[0].readWrite = 0;
                    notifyInfo[0].value = "0";
                    ALSReadAjaxRequest(GetHandlerByControllerID(notifyInfo[0].cid), queryStr, JSON.stringify(notifyInfo[0]), function (data) {
                        try {
                            $.mobile.changePage("index.html#notificationDetailsDialogPage", { transition: "none", role: "dialog" });
                            //document.getElementById("lblnotificationDialogHeader").innerHTML = notifyName + " Notify Details!";
                            document.getElementById("lblEnableDisable").innerHTML = notifyName + " notification :";

                            $("#NotifyGSceneList").empty();
                            $("#NotifyGSceneList").html("");
                            $("#NotifyGSceneList").selectmenu("refresh", true);
                            $("#NotifyGSceneList").append("<option value='0' style='font-size: 15px; padding: 6px;'>None</option>");

                            var tmpGSeneList = GetGSceneConfigByCID(notifyInfo[0].cid);
                            for (var i = 0; i < tmpGSeneList.length; i++) {
                                $("#NotifyGSceneList").append("<option value='" + tmpGSeneList[i].FileId + "' style='font-size: 15px; padding: 6px;'>" + tmpGSeneList[i].Name + "</option>");
                            }

                            var intNotifyActionNumber = parseInt(data.trim());
                            var strNotifyActionNumber = data.trim();
                            if (strNotifyActionNumber.length >= 4) {
                                var notifyEnableDisableVal = strNotifyActionNumber.substring(0, 1);
                                var notifySMSCallBothVal = strNotifyActionNumber.substring(1, 2);
                                var notifyTrigerVal = strNotifyActionNumber.substring(2, 3);
                                var notifyGSceneVal = parseInt(strNotifyActionNumber.substring(3, 5)).toString();

                                if (notifyEnableDisableVal != "2")
                                    notifyGSceneVal = "0";

                                //                                if (notifyGSceneVal != "0")
                                //                                    notifyGSceneVal = notifyInfo[0].cid + "_" + notifyGSceneVal;

                                notifyInfo[0].value = strNotifyActionNumber;

                                //document.getElementById("lblNotifyLocation").value = strLocation;
                                //$("#lblNotifyLocation").prop('value', strLocation);
                                //document.getElementById("lblNotifyInterface").value = strInterface;
                                $("#lblNotifyLocation").text(strLocation);
                                $("#lblNotifyInterface").text(strInterface);

                                $('#btnWriteNotification').attr('name', JSON.stringify(notifyInfo[0]));

                                if (notifyEnableDisableVal == "1")
                                    $('#divforNotifyOtherDetails').hide();
                                else
                                    $('#divforNotifyOtherDetails').show();

                                $("#NotifyEnableDisable").val(notifyEnableDisableVal).slider("refresh");
                                //$("#NotifyEnableDisable").val("2").slider("refresh");
                                //$('input[name=name_of_your_radiobutton]:checked').val(); Get Value

                                if (notifySMSCallBothVal == "0") {
                                    //$("#smsNotify").attr("checked", true);
                                    $("#smsNotify").prop("checked", true);
                                }
                                else if (notifySMSCallBothVal == "1") {
                                    $("#callNotify").prop("checked", true);
                                }
                                else if (notifySMSCallBothVal == "2") {
                                    $("#smscallNotify").prop("checked", true);
                                }
                                else {
                                    $("#noneNotify").prop("checked", true);
                                }

                                $("input[name=notifyBy]").checkboxradio("refresh");

                                if (notifyTrigerVal == "0") {
                                    $("#nEdge").prop("checked", true);
                                }
                                else {
                                    $("#pEdge").prop("checked", true);
                                }
                                $("input[name=notifyOn]").checkboxradio("refresh");

                                //$("#NotifyGSceneList").val(parseInt(notifyGSceneVal).toString()).attr('selected', true).siblings('option').removeAttr('selected');
                                $("#NotifyGSceneList").val(notifyGSceneVal).attr('selected', true).siblings('option').removeAttr('selected');
                                $("#NotifyGSceneList").selectmenu("refresh", true);

                                $.mobile.loading("hide");
                                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }

                            }
                            else {
                                $.mobile.loading("hide");
                                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                                $.mobile.back();
                            }
                        }
                        catch (err) {
                            $.mobile.loading("hide");
                            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                            $.mobile.back();
                        }
                    });
                }
                else {
                    $.mobile.loading("hide");
                    try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                    $.mobile.back();
                }
            }
            else {
                $.mobile.loading("hide");
                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                $.mobile.back();
            }
        };

        function OpenScheduleDialog(cid, scheduleID, scheduleName) {

            $.mobile.loading("show", {
                text: 'Wait..',
                textVisible: true,
                theme: 'a',
                html: ""
            });

            $('body').append("<div id='loaddiv' class='ui-loader-background'> </div>");

            if (scheduleID != "" && scheduleID != "-1") {
                var queryStr = "/schedule.html";
                var scheduleInfo = GetScheduleConfigById(cid, scheduleID);
                if (scheduleInfo.length > 0) {
                    scheduleInfo[0].readWrite = 0;
                    scheduleInfo[0].value = "0";
                    ALSReadAjaxRequest(GetHandlerByControllerID(scheduleInfo[0].cid), queryStr, JSON.stringify(scheduleInfo[0]), function (data) {
                        try {
                            $.mobile.changePage("index.html#scheduleDetailsDialogPage", { transition: "none", role: "dialog" });
                            //document.getElementById("lblnotificationDialogHeader").innerHTML = notifyName + " Notify Details!";
                            document.getElementById("lblScheduleEnableDisable").innerHTML = scheduleName + " schedule:";

                            $("#ScheduleGSceneList").empty();
                            $("#ScheduleGSceneList").html("");
                            $("#ScheduleGSceneList").selectmenu("refresh", true);
                            $("#ScheduleGSceneList").append("<option value='0' style='font-size: 15px; padding: 6px;'>None</option>");

                            var tmpGSeneList = GetGSceneConfigByCID(scheduleInfo[0].cid);
                            for (var i = 0; i < tmpGSeneList.length; i++) {
                                $("#ScheduleGSceneList").append("<option value='" + tmpGSeneList[i].FileId + "' style='font-size: 15px; padding: 6px;'>" + tmpGSeneList[i].Name + "</option>");
                            }


                            var info = JSON.parse(data);
                            scheduleInfo[0].isEnable = info.isEnable;
                            scheduleInfo[0].days = info.days;
                            try {
                                scheduleInfo[0].hour = info.hour > 24 ? 0 : info.hour;
                                info.hour = info.hour > 24 ? 0 : info.hour;
                            }
                            catch (err) {
                                scheduleInfo[0].hour = 0;
                                info.hour = 0;
                            }
                            try {
                                scheduleInfo[0].mins = info.mins > 59 ? 0 : info.mins;
                                info.mins = info.mins > 59 ? 0 : info.mins;
                            }
                            catch (err) {
                                scheduleInfo[0].mins = 0;
                                info.mins = 0;
                            }

                            if (info.isEnable != "1")
                                info.globalScene = 0;

                            scheduleInfo[0].globalScene = info.globalScene;
                            var schGSceneVal = parseInt(info.globalScene).toString();
                            //                            if (schGSceneVal != "0")
                            //                                schGSceneVal = scheduleInfo[0].cid + "_" + schGSceneVal;

                            var nTime = (info.hour >= 10 ? info.hour.toString() : '0' + info.hour) + ":" + (info.mins >= 10 ? info.mins.toString() : '0' + info.mins);

                            var daysInBinary = DigitToBinary(info.days);

                            if (daysInBinary.length == "8") {

                                $('#btnWriteSchedule').attr('name', JSON.stringify(scheduleInfo[0]));

                                $("#ScheduleEnableDisable").val(info.isEnable).slider("refresh");
                                if (info.isEnable == "1") {
                                    if ($("#scheduleParentDiv").hasClass("ui-disabled"))
                                        $("#scheduleParentDiv").removeClass("ui-disabled");
                                    //                                    $("#ScheduleGSceneList").selectmenu('enable');
                                    //                                    $("input[name=days]").checkboxradio('enable'); //checkboxradio('disable');
                                    //                                    $("#scheduleTime");
                                }
                                else {
                                    if (!$("#scheduleParentDiv").hasClass("ui-disabled"))
                                        $("#scheduleParentDiv").addClass("ui-disabled");
                                    //                                    $("#ScheduleGSceneList").selectmenu('disable');
                                    //                                    $("input[name=days]").checkboxradio('disable'); 
                                }
                                //$("#ScheduleGSceneList").val(parseInt(info.globalScene).toString()).attr('selected', true).siblings('option').removeAttr('selected');
                                $("#ScheduleGSceneList").val(schGSceneVal).attr('selected', true).siblings('option').removeAttr('selected');
                                $("#ScheduleGSceneList").selectmenu("refresh", true);

                                if (daysInBinary.substring(1, 2) == "1")//for Mon
                                    $("#chkSat").prop("checked", true);
                                else
                                    $("#chkSat").prop("checked", false);
                                if (daysInBinary.substring(2, 3) == "1")
                                    $("#chkFri").prop("checked", true);
                                else
                                    $("#chkFri").prop("checked", false);
                                if (daysInBinary.substring(3, 4) == "1")
                                    $("#chkThu").prop("checked", true);
                                else
                                    $("#chkThu").prop("checked", false);
                                if (daysInBinary.substring(4, 5) == "1")
                                    $("#chkWed").prop("checked", true);
                                else
                                    $("#chkWed").prop("checked", false);
                                if (daysInBinary.substring(5, 6) == "1")
                                    $("#chkTue").prop("checked", true);
                                else
                                    $("#chkTue").prop("checked", false);
                                if (daysInBinary.substring(6, 7) == "1")
                                    $("#chkMon").prop("checked", true);
                                else
                                    $("#chkMon").prop("checked", false);
                                if (daysInBinary.substring(7, 8) == "1")//For Sun
                                    $("#chkSun").prop("checked", true);
                                else
                                    $("#chkSun").prop("checked", false);

                                $("input[name=days]").checkboxradio("refresh");

                                $("#scheduleTime").trigger('datebox', { 'method': 'set', 'value': nTime });

                                $.mobile.loading("hide");
                                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                            }
                            else {
                                $.mobile.loading("hide");
                                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                                $.mobile.back();
                            }

                            //$.mobile.back();
                        }
                        catch (err) {
                            $.mobile.loading("hide");
                            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                            $.mobile.back();
                        }
                    });
                }
                else {
                    $.mobile.loading("hide");
                    try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                    $.mobile.back();
                }
            }
            else {
                $.mobile.loading("hide");
                try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                $.mobile.back();
            }
        };

        function modeWinShow(el, iType) {

            var iValue = $("#selInterface_" + iType).val();
            if (iValue != undefined && iValue != "") {
                $.mobile.loading("show", {
                    text: 'Wait..',
                    textVisible: true,
                    theme: 'a',
                    html: ""
                });
                $('body').append("<div id='loaddiv' class='ui-loader-background'> </div>");

                var lTypeNumVal = $("#selLocation_" + iType).val() == null ? "" : $("#selLocation_" + iType).val();
                var iTypeNumVal = $("#selInterface_" + iType).val() == null ? "" : $("#selInterface_" + iType).val(); //$("#selInterface_" + iType).val();

                var lTypeNumValArray = lTypeNumVal.split("_");
                var iTypeNumIdValArray = iTypeNumVal.split("_");

                if (lTypeNumValArray.length == 2 && iTypeNumIdValArray.length == 8) {

                    //iTypeNumIdValArray 0-id 1-busID 2-deviceId 3-channelId 4-interfaceType 5-interfaceNumber
                    var tmpChannelID = (($.mobile.activePage.is("#fanPage") && iType == "2") || ($.mobile.activePage.is("#dimmerPage") && iType == "3")) ? (parseInt(iTypeNumIdValArray[4]) + 1).toString() : iTypeNumIdValArray[4]; // for  fan or dimmer get mode info based on channelID + 1.

                    var modeInfo = GetModeInfo(iTypeNumIdValArray[0], iTypeNumIdValArray[2], iTypeNumIdValArray[3], tmpChannelID); //iTypeNumIdValArray[3]);
                    if (modeInfo.length > 0) {
                        var queryStr = "/info.html";
                        modeInfo[0].readWrite = 0;
                        ALSReadAjaxRequest(GetHandlerByControllerID(modeInfo[0].cid), queryStr, JSON.stringify(modeInfo[0]), function (data) {
                            try {
                                var val = JSON.parse(data).value.trim();
                                $.mobile.changePage("index.html#modeDialogPage", { transition: "none", role: "dialog" });
                                modeInfo[0].value = val.toString();
                                $('#sTagWrite_btn').attr('name', JSON.stringify(modeInfo[0]));
                                $("#SelSimpleMode").val(val.toString());
                                try { $("#SelSimpleMode").selectmenu("refresh", true); } catch (err) { };
                            }
                            catch (err) {
                                $.mobile.back();
                            }
                            $.mobile.loading("hide");
                            try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                        });
                    }
                    else {
                        $.mobile.loading("hide");
                        try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }
                    }
                }
                else {
                    $.mobile.loading("hide");
                    try { var elMask = document.getElementById('loaddiv'); elMask.parentNode.removeChild(elMask); } catch (msg) { }

                }
            }

        };

        function OpenSettingsWindow() {
            LoadSettings();
            try {
                if (username.trim() != "" && password.trim() != "" && ip.trim() != "" && port.trim() != "" && IsAuthenticated)
                    $("#myTabs").tabs({ disabled: false });
                else
                    $("#myTabs").tabs({ disabled: [1, 2] }); //$("#myTabs").tabs({ disabled: [1] });

                $("#myTabs").tabs({ active: 0 });

                if ($("#t3").hasClass('ui-btn-active'))
                    $("#t3").removeClass('ui-btn-active');
                if ($("#t2").hasClass('ui-btn-active'))
                    $("#t2").removeClass('ui-btn-active');
                if (!$("#t1").hasClass('ui-btn-active'))
                    $("#t1").addClass('ui-btn-active');
            }
            catch (err) {
            }

            $.mobile.changePage("index.html#settingDialogPage", { transition: "none", role: "dialog" });
            //activePage = "settingDialogPage";
        };

        function DisplayErrorMsg(errorMsg) {
            $.mobile.changePage("index.html#errorDialog", { transition: "none", role: "dialog" });
            $("#lblError").html(errorMsg);
            //activePage = "errorDialog";
        };

               
    </script>
    <script type="text/javascript">

        function IsAuthenticatedUser(callback) {
            try {
                var queryStr = "/auth.html";
                if (!IsAuthenticated) {
                    // var userpassInfo = getUserNamePasswordInfo();
                    getUserNamePasswordInfo(function (data) {
                        //alert(data.user + ':' + data.pass);
                        ALSUserAuthenticationRequest(queryStr, JSON.stringify(data), function (data) {
                            if (data == "true")
                                IsAuthenticated = true;
                            else
                                IsAuthenticated = false;

                            callback(data);
                        });
                    });
                }
                else {
                    callback("true");
                }
            }
            catch (err) { IsAuthenticated = false; callback("false"); }
        };

        function ConverCsvTOJSON(strCSV, strConfigFile, cid) {

            var lines = strCSV.split("\n");

            var result = [];

            var headers = lines[0].split(",");

            if (strConfigFile != "LTypeConfig" && strConfigFile != "ITypeConfig" && strConfigFile != "ISubTypeConfig" && strConfigFile != "SlaveConfig")
                headers.push("cid");

            for (var i = 1; i < lines.length; i++) {

                var obj = {};
                var currentline = lines[i].split(",");
                var hLength = 0;
                if (strConfigFile != "LTypeConfig" && strConfigFile != "ITypeConfig" && strConfigFile != "ISubTypeConfig" && strConfigFile != "SlaveConfig")
                    hLength = headers.length - 1;
                else
                    hLength = headers.length;

                //                if (strConfigFile == "SlaveConfig") {
                //                    obj.Id = 0;
                //                    obj.IP = localStorage.getItem('Ip');
                //                    try {
                //                        obj.Port = parseInt(localStorage.getItem('Port'));
                //                    }
                //                    catch (err) {

                //                    }
                //                }

                for (var j = 0; j < hLength; j++) {
                    if (j == 1 || j == 11 || j == 18) {
                        if (j == 18) {
                            if (strConfigFile == "UUIDConfig") {
                                try {
                                    obj[headers[j]] = parseInt(currentline[j]);
                                }
                                catch (err) { obj[headers[j]] = currentline[j]; }
                            }
                            else {
                                obj[headers[j]] = currentline[j];
                            }
                        }
                        else {
                            obj[headers[j]] = currentline[j];
                        }
                    }
                    else {
                        try {
                            obj[headers[j]] = parseInt(currentline[j]);
                        }
                        catch (err) { obj[headers[j]] = currentline[j]; }
                    }

                }
                if (strConfigFile != "LTypeConfig" && strConfigFile != "ITypeConfig" && strConfigFile != "ISubTypeConfig" && strConfigFile != "SlaveConfig")
                    obj.cid = cid;
                result.push(obj);

            }

            //return result; //JavaScript object
            return JSON.stringify(result); //JSON
        };

        function GetUUIDConfiguration(cid, remoteIP, remotePort, callback) {

            try {
                var tmpConfig = JSON.parse(localStorage.getItem("UUIDConfig"));
                if (tmpConfig.length < 1) {
                    var newHandler = "";
                    if (remotePort == "")
                        newHandler = "http://" + remoteIP; //+ ":" + port;           
                    else
                        newHandler = "http://" + remoteIP + ":" + remotePort;


                    var queryStr = "/file.html?name=config,uuid.csv";

                    GetUUIDConfig(newHandler, queryStr, function (data) {
                        try {
                            var strCSV = data.substring(3, data.length - 5);
                            strCSV = strCSV.replace(/[\r]/g, '');
                            strCSV = ConverCsvTOJSON(strCSV, "UUIDConfig", cid);
                            //strCSV = strCSV + localStorage.getItem("UUIDConfig");                        
                            //UUIDConfig = JSON.parse(strCSV);
                            UUIDConfig.push.apply(UUIDConfig, JSON.parse(strCSV));
                            //localStorage.setItem("UUIDConfig", JSON.stringify(UUIDConfig));
                            callback("true");
                        }
                        catch (err) {
                            UUIDConfig = [];
                            localStorage.setItem("UUIDConfig", "[]");
                            callback("false");
                        }
                    });
                }
                else {
                    callback("true");
                }
            }
            catch (err) { callback("false"); }
        };

        function GetIRConfiguration(cid, remoteIP, remotePort, callback) {

            try {
                var tmpConfig = JSON.parse(localStorage.getItem("IRConfig"));
                if (tmpConfig.length < 1) {
                    var newHandler = "";
                    if (remotePort == "")
                        newHandler = "http://" + remoteIP; //+ ":" + port;           
                    else
                        newHandler = "http://" + remoteIP + ":" + remotePort;

                    var queryStr = "/file.html?name=config,ir.csv";
                    //if (IRConfig.length < 1) {
                    GetIRConfig(newHandler, queryStr, function (data) {
                        try {
                            var strCSV = data.substring(3, data.length - 5);
                            strCSV = strCSV.replace(/[\r]/g, '');
                            strCSV = ConverCsvTOJSON(strCSV, "IRConfig", cid);
                            //                            localStorage.setItem("IRConfig", strCSV);
                            //                            IRConfig = JSON.parse(strCSV);
                            IRConfig.push.apply(IRConfig, JSON.parse(strCSV));
                            callback("true");
                        }
                        catch (err) {
                            IRConfig = [];
                            localStorage.setItem("IRConfig", "[]");
                            callback("false");
                        }
                    });
                }
                else {
                    callback("true");
                }
            }
            catch (err) { callback("false"); }
        };

        function GetGSceneConfiguration(cid, remoteIP, remotePort, callback) {

            try {
                var tmpConfig = JSON.parse(localStorage.getItem("GSceneConfig"));
                if (tmpConfig.length < 1) {
                    var newHandler = "";
                    if (remotePort == "")
                        newHandler = "http://" + remoteIP; //+ ":" + port;           
                    else
                        newHandler = "http://" + remoteIP + ":" + remotePort;
                    var queryStr = "/file.html?name=config,global.csv";
                    //if (GSceneConfig.length < 1) {
                    GetGlobalScene(newHandler, queryStr, function (data) {
                        try {
                            var strCSV = data.substring(3, data.length - 5);
                            strCSV = strCSV.replace(/[\r]/g, '');
                            strCSV = ConverCsvTOJSON(strCSV, "GSceneConfig", cid);
                            //                            localStorage.setItem("GSceneConfig", strCSV);
                            //                            GSceneConfig = JSON.parse(strCSV);
                            GSceneConfig.push.apply(GSceneConfig, JSON.parse(strCSV));
                            callback("true");
                        }
                        catch (err) {
                            GSceneConfig = [];
                            localStorage.setItem("GSceneConfig", "[]");
                            callback("false");
                        }
                    });
                }
                else {
                    callback("true");
                }
            }
            catch (err) { callback("false"); }
        };

        function GetNotifyConfig(cid, remoteIP, remotePort, callback) {

            try {
                var tmpConfig = JSON.parse(localStorage.getItem("NotifyConfig"));
                if (tmpConfig.length < 1) {
                    var newHandler = "";
                    if (remotePort == "")
                        newHandler = "http://" + remoteIP; //+ ":" + port;           
                    else
                        newHandler = "http://" + remoteIP + ":" + remotePort;
                    var queryStr = "/file.html?name=config,notify.csv";
                    //if (NotifyConfig.length < 1) {
                    GetNotificationConfig(newHandler, queryStr, function (data) {
                        try {
                            var strCSV = data.substring(3, data.length - 5);
                            strCSV = strCSV.replace(/[\r]/g, '');
                            strCSV = ConverCsvTOJSON(strCSV, "NotifyConfig", cid);
                            //                            localStorage.setItem("NotifyConfig", strCSV);
                            //                            NotifyConfig = JSON.parse(strCSV);
                            NotifyConfig.push.apply(NotifyConfig, JSON.parse(strCSV));
                            callback("true");
                        }
                        catch (err) {
                            NotifyConfig = [];
                            localStorage.setItem("NotifyConfig", "[]");
                            callback("false");
                        }
                    });
                }
                else {
                    callback("true");
                }
            }
            catch (err) { callback("false"); }
        };

        function GetScheduleConfig(cid, remoteIP, remotePort, callback) {
            try {
                var tmpConfig = JSON.parse(localStorage.getItem("ScheduleConfig"));
                if (tmpConfig.length < 1) {
                    var newHandler = "";
                    if (remotePort == "")
                        newHandler = "http://" + remoteIP; //+ ":" + port;           
                    else
                        newHandler = "http://" + remoteIP + ":" + remotePort;
                    var queryStr = "/file.html?name=config,schedule.csv";
                    //if (ScheduleConfig.length < 1) {
                    GetScheduleConfigReq(newHandler, queryStr, function (data) {
                        try {
                            var strCSV = data.substring(3, data.length - 5);
                            strCSV = strCSV.replace(/[\r]/g, '');
                            strCSV = ConverCsvTOJSON(strCSV, "ScheduleConfig", cid);
                            //                            localStorage.setItem("ScheduleConfig", strCSV);
                            //                            ScheduleConfig = JSON.parse(strCSV);
                            ScheduleConfig.push.apply(ScheduleConfig, JSON.parse(strCSV));
                            callback("true");
                        }
                        catch (err) {
                            ScheduleConfig = [];
                            localStorage.setItem("ScheduleConfig", "[]");
                            callback("false");
                        }
                    });
                }
                else {
                    callback("true");
                }
            }
            catch (err) { callback("false"); }
        };

        function GetLTypeConfiguration(cid, callback) {

            try {
                var queryStr = "/file.html?name=config,ltype.csv";
                if (LTypeConfig.length < 1) {
                    GetLocationTypeConfig(queryStr, function (data) {
                        try {
                            var strCSV = data.substring(3, data.length - 5);
                            strCSV = strCSV.replace(/[\r]/g, '');
                            strCSV = ConverCsvTOJSON(strCSV, "LTypeConfig", cid); //0 for Master
                            localStorage.setItem("LTypeConfig", strCSV);
                            LTypeConfig = JSON.parse(strCSV);
                            callback("true");
                        }
                        catch (err) {
                            LTypeConfig = [];
                            localStorage.setItem("LTypeConfig", "[]");
                            callback("false");
                        }
                    });
                }
                else {
                    callback("true");
                }
            }
            catch (err) { callback("false"); }
        };

        function GetITypeConfiguration(cid, callback) {

            try {
                var queryStr = "/file.html?name=config,itype.csv";
                if (ITypeConfig.length < 1) {
                    GetInterfaceTypeConfig(queryStr, function (data) {
                        try {
                            var strCSV = data.substring(3, data.length - 5);
                            strCSV = strCSV.replace(/[\r]/g, '');
                            strCSV = ConverCsvTOJSON(strCSV, "ITypeConfig", cid);
                            localStorage.setItem("ITypeConfig", strCSV);
                            ITypeConfig = JSON.parse(strCSV);
                            callback("true");
                        }
                        catch (err) {
                            ITypeConfig = [];
                            localStorage.setItem("ITypeConfig", "[]");
                            callback("false");
                        }
                    });
                }
                else {
                    callback("true");
                }
            }
            catch (err) { callback("false"); }
        };

        function GetISubTypeConfiguration(cid, callback) {

            try {
                var queryStr = "/file.html?name=config,istype.csv";
                if (ISubTypeConfig.length < 1) {
                    GetInterfaceSubTypeConfig(queryStr, function (data) {
                        try {
                            var strCSV = data.substring(3, data.length - 5);
                            strCSV = strCSV.replace(/[\r]/g, '');
                            strCSV = ConverCsvTOJSON(strCSV, "ISubTypeConfig", cid);
                            localStorage.setItem("ISubTypeConfig", strCSV);
                            ISubTypeConfig = JSON.parse(strCSV);
                            callback("true");
                        }
                        catch (err) {
                            ISubTypeConfig = [];
                            localStorage.setItem("ISubTypeConfig", "[]");
                            callback("false");
                        }
                    });
                }
                else {
                    callback("true");
                }
            }
            catch (err) { callback("false"); }
        };

        function GetSlaveConfiguration(cid, callback) {

            try {
                var queryStr = "/file.html?name=config,slave.csv";
                if (SlaveConfig.length < 1) {
                    GetSlaveConfig(queryStr, function (data) {
                        try {
                            var strCSV = data.substring(3, data.length - 5);
                            strCSV = strCSV.replace(/[\r]/g, '');
                            strCSV = ConverCsvTOJSON(strCSV, "SlaveConfig", cid);
                            localStorage.setItem("SlaveConfig", strCSV);
                            SlaveConfig = JSON.parse(strCSV);
                            callback("true");
                        }
                        catch (err) {
                            SlaveConfig = [];
                            localStorage.setItem("SlaveConfig", "[]");
                            callback("false");
                        }
                    });
                }
                else {
                    callback("true");
                }
            }
            catch (err) {
                callback("false");
            }
        };

    </script>
    <script type="text/javascript">
        function getUserNamePasswordInfo(callback) {
            try {
                var uidpswInfo = { "user": username, "pass": ConvertStringtoECBEncryptString(password) };
                //uidpswInfo.user = username;
                //uidpswInfo.pass = ConvertStringtoECBEncryptString(password);
                callback(uidpswInfo);
            }
            catch (err) {
                callback({ "user": "", "pass": "" });
            }
        };

        function getChangePasswordInfo(newpsw, callback) {
            var uidpswInfo = { "user": username, "pass": ConvertStringtoECBEncryptString(password), "newpass": ConvertStringtoECBEncryptString(newpsw) };
            //uidpswInfo.user = username;
            //uidpswInfo.pass = ConvertStringtoECBEncryptString(password);
            callback(uidpswInfo);
        };

        function ConvertStringtoECBEncryptString(textInputStr) {
            var key = aesjs.util.convertStringToBytes("G212#)@S$(%546!3"); //aesjs.util.convertStringToBytes("0000000000000000");
            for (var i = textInputStr.length; i < 16; i++) {
                textInputStr = textInputStr + '\0';
            }
            if (textInputStr.length == 16) {
                var aesEcb = new aesjs.ModeOfOperation.ecb(key);
                var textInputBytes = aesjs.util.convertStringToBytes(textInputStr);
                var encryptedBytes = aesEcb.encrypt(textInputBytes);
                return aesjs.util.convertBytesToString(encryptedBytes, 'hex').toString();
            }
            else {
                return "";
            }
        };

        function DigitToBinary(strDigit) {
            try {
                return ("00000000" + Number(strDigit).toString(2)).substr(-8);
            }
            catch (err) {
                return ("00000000");
            }
        };
        function BinaryToDigit(strBinary, callback) {
            try {
                return parseInt(strBinary, 2);
            }
            catch (err) {
                return 0;
            }
        };
    
    </script>
    <script type="text/javascript">

        function setCurrentDateTime() {
            var dt1 = new Date();
            $("#lbldatetime").html(dt1.toLocaleDateString() + " " + dt1.toLocaleTimeString());

            if ($("#t3").hasClass('ui-btn-active'))
                window.setTimeout("setCurrentDateTime()", 1000);
        };

        function btnSetDateTime_click() {

            var currentUnixtime = (new Date().getTime() / 1000 | 0) + 19800;

            SetDateTimeIntoDevice(GetHandlerByControllerID(0), currentUnixtime.toString(), function (data) {

                for (var i = 0; i < SlaveConfig.length; i++) {
                    SetDateTimeIntoDevice(GetHandlerByControllerID(SlaveConfig[i].Id), currentUnixtime.toString(), function (data) {

                    });
                }

            });

        };

        function SetDateTimeIntoDevice(newHandler, unixTime, callback) {

            try {

                var timeInfo = { "value": unixTime, "readWrite": 1 };
                var queryStr = "/time.html";
                SetDateTimeIntoMasterSlave(newHandler, queryStr, JSON.stringify(timeInfo), function (data) {
                    try {
                        callback("true");
                    }
                    catch (err) {
                        callback("false");
                    }
                });
            }
            catch (err) { callback("false"); }
        };
       
    </script>
</body>
</html>
